var zt=Object.defineProperty;var Ut=(r,t,n)=>t in r?zt(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n;var le=(r,t,n)=>Ut(r,typeof t!="symbol"?t+"":t,n);import{r as l,a as Lt,R as Ft,b as $t}from"./vendor-CDaM45aE.js";import{i as Mt,g as Ot,a as _t,o as Xt,s as Ht,c as qt,b as Vt,d as ct,e as we,u as Yt,f as je,h as Ce,q as Ye,w as Je,l as Jt,j as Ke}from"./firebase-DNlyiNlE.js";import{W as Kt}from"./web3-BBFzGNQd.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var dt={exports:{}},Te={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gt=l,Qt=Symbol.for("react.element"),Zt=Symbol.for("react.fragment"),er=Object.prototype.hasOwnProperty,tr=Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rr={key:!0,ref:!0,__self:!0,__source:!0};function ut(r,t,n){var s,a={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)er.call(t,s)&&!rr.hasOwnProperty(s)&&(a[s]=t[s]);if(r&&r.defaultProps)for(s in t=r.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:Qt,type:r,key:i,ref:o,props:a,_owner:tr.current}}Te.Fragment=Zt;Te.jsx=ut;Te.jsxs=ut;dt.exports=Te;var e=dt.exports,ze={},Ge=Lt;ze.createRoot=Ge.createRoot,ze.hydrateRoot=Ge.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ge(){return ge=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},ge.apply(this,arguments)}var re;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(re||(re={}));const Qe="popstate";function nr(r){r===void 0&&(r={});function t(s,a){let{pathname:i,search:o,hash:d}=s.location;return Ue("",{pathname:i,search:o,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:Be(a)}return ar(t,n,null,r)}function M(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function mt(r,t){if(!r){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function sr(){return Math.random().toString(36).substr(2,8)}function Ze(r,t){return{usr:r.state,key:r.key,idx:t}}function Ue(r,t,n,s){return n===void 0&&(n=null),ge({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof t=="string"?de(t):t,{state:n,key:t&&t.key||s||sr()})}function Be(r){let{pathname:t="/",search:n="",hash:s=""}=r;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function de(r){let t={};if(r){let n=r.indexOf("#");n>=0&&(t.hash=r.substr(n),r=r.substr(0,n));let s=r.indexOf("?");s>=0&&(t.search=r.substr(s),r=r.substr(0,s)),r&&(t.pathname=r)}return t}function ar(r,t,n,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:i=!1}=s,o=a.history,d=re.Pop,c=null,u=m();u==null&&(u=0,o.replaceState(ge({},o.state,{idx:u}),""));function m(){return(o.state||{idx:null}).idx}function h(){d=re.Pop;let b=m(),j=b==null?null:b-u;u=b,c&&c({action:d,location:x.location,delta:j})}function g(b,j){d=re.Push;let B=Ue(x.location,b,j);u=m()+1;let v=Ze(B,u),P=x.createHref(B);try{o.pushState(v,"",P)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;a.location.assign(P)}i&&c&&c({action:d,location:x.location,delta:1})}function y(b,j){d=re.Replace;let B=Ue(x.location,b,j);u=m();let v=Ze(B,u),P=x.createHref(B);o.replaceState(v,"",P),i&&c&&c({action:d,location:x.location,delta:0})}function k(b){let j=a.location.origin!=="null"?a.location.origin:a.location.href,B=typeof b=="string"?b:Be(b);return B=B.replace(/ $/,"%20"),M(j,"No window.location.(origin|href) available to create URL for href: "+B),new URL(B,j)}let x={get action(){return d},get location(){return r(a,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Qe,h),c=b,()=>{a.removeEventListener(Qe,h),c=null}},createHref(b){return t(a,b)},createURL:k,encodeLocation(b){let j=k(b);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:g,replace:y,go(b){return o.go(b)}};return x}var et;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(et||(et={}));function ir(r,t,n){return n===void 0&&(n="/"),or(r,t,n)}function or(r,t,n,s){let a=typeof t=="string"?de(t):t,i=Oe(a.pathname||"/",n);if(i==null)return null;let o=pt(r);lr(o);let d=null;for(let c=0;d==null&&c<o.length;++c){let u=vr(i);d=yr(o[c],u)}return d}function pt(r,t,n,s){t===void 0&&(t=[]),n===void 0&&(n=[]),s===void 0&&(s="");let a=(i,o,d)=>{let c={relativePath:d===void 0?i.path||"":d,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(M(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let u=ne([s,c.relativePath]),m=n.concat(c);i.children&&i.children.length>0&&(M(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),pt(i.children,t,m,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:fr(u,i.index),routesMeta:m})};return r.forEach((i,o)=>{var d;if(i.path===""||!((d=i.path)!=null&&d.includes("?")))a(i,o);else for(let c of ht(i.path))a(i,o,c)}),t}function ht(r){let t=r.split("/");if(t.length===0)return[];let[n,...s]=t,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return a?[i,""]:[i];let o=ht(s.join("/")),d=[];return d.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&d.push(...o),d.map(c=>r.startsWith("/")&&c===""?"/":c)}function lr(r){r.sort((t,n)=>t.score!==n.score?n.score-t.score:gr(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const cr=/^:[\w-]+$/,dr=3,ur=2,mr=1,pr=10,hr=-2,tt=r=>r==="*";function fr(r,t){let n=r.split("/"),s=n.length;return n.some(tt)&&(s+=hr),t&&(s+=ur),n.filter(a=>!tt(a)).reduce((a,i)=>a+(cr.test(i)?dr:i===""?mr:pr),s)}function gr(r,t){return r.length===t.length&&r.slice(0,-1).every((s,a)=>s===t[a])?r[r.length-1]-t[t.length-1]:0}function yr(r,t,n){let{routesMeta:s}=r,a={},i="/",o=[];for(let d=0;d<s.length;++d){let c=s[d],u=d===s.length-1,m=i==="/"?t:t.slice(i.length)||"/",h=xr({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},m),g=c.route;if(!h)return null;Object.assign(a,h.params),o.push({params:a,pathname:ne([i,h.pathname]),pathnameBase:Sr(ne([i,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(i=ne([i,h.pathnameBase]))}return o}function xr(r,t){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,s]=br(r.path,r.caseSensitive,r.end),a=t.match(n);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:s.reduce((u,m,h)=>{let{paramName:g,isOptional:y}=m;if(g==="*"){let x=d[h]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const k=d[h];return y&&!k?u[g]=void 0:u[g]=(k||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:r}}function br(r,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),mt(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],a="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,d,c)=>(s.push({paramName:d,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),a+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":r!==""&&r!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function vr(r){try{return r.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return mt(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),r}}function Oe(r,t){if(t==="/")return r;if(!r.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=r.charAt(n);return s&&s!=="/"?null:r.slice(n)||"/"}function wr(r,t){t===void 0&&(t="/");let{pathname:n,search:s="",hash:a=""}=typeof r=="string"?de(r):r;return{pathname:n?n.startsWith("/")?n:jr(n,t):t,search:Br(s),hash:kr(a)}}function jr(r,t){let n=t.replace(/\/+$/,"").split("/");return r.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Ae(r,t,n,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Cr(r){return r.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function _e(r,t){let n=Cr(r);return t?n.map((s,a)=>a===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function Xe(r,t,n,s){s===void 0&&(s=!1);let a;typeof r=="string"?a=de(r):(a=ge({},r),M(!a.pathname||!a.pathname.includes("?"),Ae("?","pathname","search",a)),M(!a.pathname||!a.pathname.includes("#"),Ae("#","pathname","hash",a)),M(!a.search||!a.search.includes("#"),Ae("#","search","hash",a)));let i=r===""||a.pathname==="",o=i?"/":a.pathname,d;if(o==null)d=n;else{let h=t.length-1;if(!s&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),h-=1;a.pathname=g.join("/")}d=h>=0?t[h]:"/"}let c=wr(a,d),u=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||m)&&(c.pathname+="/"),c}const ne=r=>r.join("/").replace(/\/\/+/g,"/"),Sr=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Br=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,kr=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Tr(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const ft=["post","put","patch","delete"];new Set(ft);const Ir=["get",...ft];new Set(Ir);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ye(){return ye=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},ye.apply(this,arguments)}const He=l.createContext(null),Wr=l.createContext(null),ae=l.createContext(null),Ie=l.createContext(null),ie=l.createContext({outlet:null,matches:[],isDataRoute:!1}),gt=l.createContext(null);function Nr(r,t){let{relative:n}=t===void 0?{}:t;ue()||M(!1);let{basename:s,navigator:a}=l.useContext(ae),{hash:i,pathname:o,search:d}=xt(r,{relative:n}),c=o;return s!=="/"&&(c=o==="/"?s:ne([s,o])),a.createHref({pathname:c,search:d,hash:i})}function ue(){return l.useContext(Ie)!=null}function me(){return ue()||M(!1),l.useContext(Ie).location}function yt(r){l.useContext(ae).static||l.useLayoutEffect(r)}function Q(){let{isDataRoute:r}=l.useContext(ie);return r?_r():Er()}function Er(){ue()||M(!1);let r=l.useContext(He),{basename:t,future:n,navigator:s}=l.useContext(ae),{matches:a}=l.useContext(ie),{pathname:i}=me(),o=JSON.stringify(_e(a,n.v7_relativeSplatPath)),d=l.useRef(!1);return yt(()=>{d.current=!0}),l.useCallback(function(u,m){if(m===void 0&&(m={}),!d.current)return;if(typeof u=="number"){s.go(u);return}let h=Xe(u,JSON.parse(o),i,m.relative==="path");r==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:ne([t,h.pathname])),(m.replace?s.replace:s.push)(h,m.state,m)},[t,s,o,i,r])}function xt(r,t){let{relative:n}=t===void 0?{}:t,{future:s}=l.useContext(ae),{matches:a}=l.useContext(ie),{pathname:i}=me(),o=JSON.stringify(_e(a,s.v7_relativeSplatPath));return l.useMemo(()=>Xe(r,JSON.parse(o),i,n==="path"),[r,o,i,n])}function Rr(r,t){return Ar(r,t)}function Ar(r,t,n,s){ue()||M(!1);let{navigator:a}=l.useContext(ae),{matches:i}=l.useContext(ie),o=i[i.length-1],d=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=me(),m;if(t){var h;let b=typeof t=="string"?de(t):t;c==="/"||(h=b.pathname)!=null&&h.startsWith(c)||M(!1),m=b}else m=u;let g=m.pathname||"/",y=g;if(c!=="/"){let b=c.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(b.length).join("/")}let k=ir(r,{pathname:y}),x=Lr(k&&k.map(b=>Object.assign({},b,{params:Object.assign({},d,b.params),pathname:ne([c,a.encodeLocation?a.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:ne([c,a.encodeLocation?a.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,n,s);return t&&x?l.createElement(Ie.Provider,{value:{location:ye({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:re.Pop}},x):x}function Dr(){let r=Or(),t=Tr(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return l.createElement(l.Fragment,null,l.createElement("h2",null,"Unexpected Application Error!"),l.createElement("h3",{style:{fontStyle:"italic"}},t),n?l.createElement("pre",{style:a},n):null,null)}const Pr=l.createElement(Dr,null);class zr extends l.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?l.createElement(ie.Provider,{value:this.props.routeContext},l.createElement(gt.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ur(r){let{routeContext:t,match:n,children:s}=r,a=l.useContext(He);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),l.createElement(ie.Provider,{value:t},s)}function Lr(r,t,n,s){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),s===void 0&&(s=null),r==null){var i;if(!n)return null;if(n.errors)r=n.matches;else if((i=s)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let o=r,d=(a=n)==null?void 0:a.errors;if(d!=null){let m=o.findIndex(h=>h.route.id&&(d==null?void 0:d[h.route.id])!==void 0);m>=0||M(!1),o=o.slice(0,Math.min(o.length,m+1))}let c=!1,u=-1;if(n&&s&&s.v7_partialHydration)for(let m=0;m<o.length;m++){let h=o[m];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=m),h.route.id){let{loaderData:g,errors:y}=n,k=h.route.loader&&g[h.route.id]===void 0&&(!y||y[h.route.id]===void 0);if(h.route.lazy||k){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((m,h,g)=>{let y,k=!1,x=null,b=null;n&&(y=d&&h.route.id?d[h.route.id]:void 0,x=h.route.errorElement||Pr,c&&(u<0&&g===0?(Xr("route-fallback"),k=!0,b=null):u===g&&(k=!0,b=h.route.hydrateFallbackElement||null)));let j=t.concat(o.slice(0,g+1)),B=()=>{let v;return y?v=x:k?v=b:h.route.Component?v=l.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=m,l.createElement(Ur,{match:h,routeContext:{outlet:m,matches:j,isDataRoute:n!=null},children:v})};return n&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?l.createElement(zr,{location:n.location,revalidation:n.revalidation,component:x,error:y,children:B(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):B()},null)}var bt=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(bt||{}),vt=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(vt||{});function Fr(r){let t=l.useContext(He);return t||M(!1),t}function $r(r){let t=l.useContext(Wr);return t||M(!1),t}function Mr(r){let t=l.useContext(ie);return t||M(!1),t}function wt(r){let t=Mr(),n=t.matches[t.matches.length-1];return n.route.id||M(!1),n.route.id}function Or(){var r;let t=l.useContext(gt),n=$r(),s=wt();return t!==void 0?t:(r=n.errors)==null?void 0:r[s]}function _r(){let{router:r}=Fr(bt.UseNavigateStable),t=wt(vt.UseNavigateStable),n=l.useRef(!1);return yt(()=>{n.current=!0}),l.useCallback(function(a,i){i===void 0&&(i={}),n.current&&(typeof a=="number"?r.navigate(a):r.navigate(a,ye({fromRouteId:t},i)))},[r,t])}const rt={};function Xr(r,t,n){rt[r]||(rt[r]=!0)}function Hr(r,t){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function jt(r){let{to:t,replace:n,state:s,relative:a}=r;ue()||M(!1);let{future:i,static:o}=l.useContext(ae),{matches:d}=l.useContext(ie),{pathname:c}=me(),u=Q(),m=Xe(t,_e(d,i.v7_relativeSplatPath),c,a==="path"),h=JSON.stringify(m);return l.useEffect(()=>u(JSON.parse(h),{replace:n,state:s,relative:a}),[u,h,a,n,s]),null}function V(r){M(!1)}function qr(r){let{basename:t="/",children:n=null,location:s,navigationType:a=re.Pop,navigator:i,static:o=!1,future:d}=r;ue()&&M(!1);let c=t.replace(/^\/*/,"/"),u=l.useMemo(()=>({basename:c,navigator:i,static:o,future:ye({v7_relativeSplatPath:!1},d)}),[c,d,i,o]);typeof s=="string"&&(s=de(s));let{pathname:m="/",search:h="",hash:g="",state:y=null,key:k="default"}=s,x=l.useMemo(()=>{let b=Oe(m,c);return b==null?null:{location:{pathname:b,search:h,hash:g,state:y,key:k},navigationType:a}},[c,m,h,g,y,k,a]);return x==null?null:l.createElement(ae.Provider,{value:u},l.createElement(Ie.Provider,{children:n,value:x}))}function Vr(r){let{children:t,location:n}=r;return Rr(Le(t),n)}new Promise(()=>{});function Le(r,t){t===void 0&&(t=[]);let n=[];return l.Children.forEach(r,(s,a)=>{if(!l.isValidElement(s))return;let i=[...t,a];if(s.type===l.Fragment){n.push.apply(n,Le(s.props.children,i));return}s.type!==V&&M(!1),!s.props.index||!s.props.children||M(!1);let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=Le(s.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fe(){return Fe=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},Fe.apply(this,arguments)}function Yr(r,t){if(r==null)return{};var n={},s=Object.keys(r),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(n[a]=r[a]);return n}function Jr(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Kr(r,t){return r.button===0&&(!t||t==="_self")&&!Jr(r)}const Gr=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Qr="6";try{window.__reactRouterVersion=Qr}catch{}const Zr="startTransition",nt=Ft[Zr];function en(r){let{basename:t,children:n,future:s,window:a}=r,i=l.useRef();i.current==null&&(i.current=nr({window:a,v5Compat:!0}));let o=i.current,[d,c]=l.useState({action:o.action,location:o.location}),{v7_startTransition:u}=s||{},m=l.useCallback(h=>{u&&nt?nt(()=>c(h)):c(h)},[c,u]);return l.useLayoutEffect(()=>o.listen(m),[o,m]),l.useEffect(()=>Hr(s),[s]),l.createElement(qr,{basename:t,children:n,location:d.location,navigationType:d.action,navigator:o,future:s})}const tn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rn=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Z=l.forwardRef(function(t,n){let{onClick:s,relative:a,reloadDocument:i,replace:o,state:d,target:c,to:u,preventScrollReset:m,viewTransition:h}=t,g=Yr(t,Gr),{basename:y}=l.useContext(ae),k,x=!1;if(typeof u=="string"&&rn.test(u)&&(k=u,tn))try{let v=new URL(window.location.href),P=u.startsWith("//")?new URL(v.protocol+u):new URL(u),F=Oe(P.pathname,y);P.origin===v.origin&&F!=null?u=F+P.search+P.hash:x=!0}catch{}let b=Nr(u,{relative:a}),j=nn(u,{replace:o,state:d,target:c,preventScrollReset:m,relative:a,viewTransition:h});function B(v){s&&s(v),v.defaultPrevented||j(v)}return l.createElement("a",Fe({},g,{href:k||b,onClick:x||i?s:B,ref:n,target:c}))});var st;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(st||(st={}));var at;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(at||(at={}));function nn(r,t){let{target:n,replace:s,state:a,preventScrollReset:i,relative:o,viewTransition:d}=t===void 0?{}:t,c=Q(),u=me(),m=xt(r,{relative:o});return l.useCallback(h=>{if(Kr(h,n)){h.preventDefault();let g=s!==void 0?s:Be(u)===Be(m);c(r,{replace:g,state:a,preventScrollReset:i,relative:o,viewTransition:d})}},[u,c,m,s,a,n,r,i,o,d])}let sn={data:""},an=r=>typeof window=="object"?((r?r.querySelector("#_goober"):window._goober)||Object.assign((r||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:r||sn,on=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,ln=/\/\*[^]*?\*\/|  +/g,it=/\n+/g,te=(r,t)=>{let n="",s="",a="";for(let i in r){let o=r[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":s+=i[1]=="f"?te(o,i):i+"{"+te(o,i[1]=="k"?"":t)+"}":typeof o=="object"?s+=te(o,t?t.replace(/([^,])+/g,d=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,d):d?d+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=te.p?te.p(i,o):i+":"+o+";")}return n+(t&&a?t+"{"+a+"}":a)+s},K={},Ct=r=>{if(typeof r=="object"){let t="";for(let n in r)t+=n+Ct(r[n]);return t}return r},cn=(r,t,n,s,a)=>{let i=Ct(r),o=K[i]||(K[i]=(c=>{let u=0,m=11;for(;u<c.length;)m=101*m+c.charCodeAt(u++)>>>0;return"go"+m})(i));if(!K[o]){let c=i!==r?r:(u=>{let m,h,g=[{}];for(;m=on.exec(u.replace(ln,""));)m[4]?g.shift():m[3]?(h=m[3].replace(it," ").trim(),g.unshift(g[0][h]=g[0][h]||{})):g[0][m[1]]=m[2].replace(it," ").trim();return g[0]})(r);K[o]=te(a?{["@keyframes "+o]:c}:c,n?"":"."+o)}let d=n&&K.g?K.g:null;return n&&(K.g=K[o]),((c,u,m,h)=>{h?u.data=u.data.replace(h,c):u.data.indexOf(c)===-1&&(u.data=m?c+u.data:u.data+c)})(K[o],t,s,d),o},dn=(r,t,n)=>r.reduce((s,a,i)=>{let o=t[i];if(o&&o.call){let d=o(n),c=d&&d.props&&d.props.className||/^go/.test(d)&&d;o=c?"."+c:d&&typeof d=="object"?d.props?"":te(d,""):d===!1?"":d}return s+a+(o??"")},"");function We(r){let t=this||{},n=r.call?r(t.p):r;return cn(n.unshift?n.raw?dn(n,[].slice.call(arguments,1),t.p):n.reduce((s,a)=>Object.assign(s,a&&a.call?a(t.p):a),{}):n,an(t.target),t.g,t.o,t.k)}let St,$e,Me;We.bind({g:1});let G=We.bind({k:1});function un(r,t,n,s){te.p=t,St=r,$e=n,Me=s}function oe(r,t){let n=this||{};return function(){let s=arguments;function a(i,o){let d=Object.assign({},i),c=d.className||a.className;n.p=Object.assign({theme:$e&&$e()},d),n.o=/ *go\d+/.test(c),d.className=We.apply(n,s)+(c?" "+c:"");let u=r;return r[0]&&(u=d.as||r,delete d.as),Me&&u[0]&&Me(d),St(u,d)}return a}}var mn=r=>typeof r=="function",ke=(r,t)=>mn(r)?r(t):r,pn=(()=>{let r=0;return()=>(++r).toString()})(),Bt=(()=>{let r;return()=>{if(r===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");r=!t||t.matches}return r}})(),hn=20,qe="default",kt=(r,t)=>{let{toastLimit:n}=r.settings;switch(t.type){case 0:return{...r,toasts:[t.toast,...r.toasts].slice(0,n)};case 1:return{...r,toasts:r.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:s}=t;return kt(r,{type:r.toasts.find(o=>o.id===s.id)?1:0,toast:s});case 3:let{toastId:a}=t;return{...r,toasts:r.toasts.map(o=>o.id===a||a===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...r,pausedAt:t.time};case 6:let i=t.time-(r.pausedAt||0);return{...r,pausedAt:void 0,toasts:r.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},Se=[],Tt={toasts:[],pausedAt:void 0,settings:{toastLimit:hn}},J={},It=(r,t=qe)=>{J[t]=kt(J[t]||Tt,r),Se.forEach(([n,s])=>{n===t&&s(J[t])})},Wt=r=>Object.keys(J).forEach(t=>It(r,t)),fn=r=>Object.keys(J).find(t=>J[t].toasts.some(n=>n.id===r)),Ne=(r=qe)=>t=>{It(t,r)},gn={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},yn=(r={},t=qe)=>{let[n,s]=l.useState(J[t]||Tt),a=l.useRef(J[t]);l.useEffect(()=>(a.current!==J[t]&&s(J[t]),Se.push([t,s]),()=>{let o=Se.findIndex(([d])=>d===t);o>-1&&Se.splice(o,1)}),[t]);let i=n.toasts.map(o=>{var d,c,u;return{...r,...r[o.type],...o,removeDelay:o.removeDelay||((d=r[o.type])==null?void 0:d.removeDelay)||(r==null?void 0:r.removeDelay),duration:o.duration||((c=r[o.type])==null?void 0:c.duration)||(r==null?void 0:r.duration)||gn[o.type],style:{...r.style,...(u=r[o.type])==null?void 0:u.style,...o.style}}});return{...n,toasts:i}},xn=(r,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:r,pauseDuration:0,...n,id:(n==null?void 0:n.id)||pn()}),xe=r=>(t,n)=>{let s=xn(t,r,n);return Ne(s.toasterId||fn(s.id))({type:2,toast:s}),s.id},_=(r,t)=>xe("blank")(r,t);_.error=xe("error");_.success=xe("success");_.loading=xe("loading");_.custom=xe("custom");_.dismiss=(r,t)=>{let n={type:3,toastId:r};t?Ne(t)(n):Wt(n)};_.dismissAll=r=>_.dismiss(void 0,r);_.remove=(r,t)=>{let n={type:4,toastId:r};t?Ne(t)(n):Wt(n)};_.removeAll=r=>_.remove(void 0,r);_.promise=(r,t,n)=>{let s=_.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof r=="function"&&(r=r()),r.then(a=>{let i=t.success?ke(t.success,a):void 0;return i?_.success(i,{id:s,...n,...n==null?void 0:n.success}):_.dismiss(s),a}).catch(a=>{let i=t.error?ke(t.error,a):void 0;i?_.error(i,{id:s,...n,...n==null?void 0:n.error}):_.dismiss(s)}),r};var bn=1e3,vn=(r,t="default")=>{let{toasts:n,pausedAt:s}=yn(r,t),a=l.useRef(new Map).current,i=l.useCallback((h,g=bn)=>{if(a.has(h))return;let y=setTimeout(()=>{a.delete(h),o({type:4,toastId:h})},g);a.set(h,y)},[]);l.useEffect(()=>{if(s)return;let h=Date.now(),g=n.map(y=>{if(y.duration===1/0)return;let k=(y.duration||0)+y.pauseDuration-(h-y.createdAt);if(k<0){y.visible&&_.dismiss(y.id);return}return setTimeout(()=>_.dismiss(y.id,t),k)});return()=>{g.forEach(y=>y&&clearTimeout(y))}},[n,s,t]);let o=l.useCallback(Ne(t),[t]),d=l.useCallback(()=>{o({type:5,time:Date.now()})},[o]),c=l.useCallback((h,g)=>{o({type:1,toast:{id:h,height:g}})},[o]),u=l.useCallback(()=>{s&&o({type:6,time:Date.now()})},[s,o]),m=l.useCallback((h,g)=>{let{reverseOrder:y=!1,gutter:k=8,defaultPosition:x}=g||{},b=n.filter(v=>(v.position||x)===(h.position||x)&&v.height),j=b.findIndex(v=>v.id===h.id),B=b.filter((v,P)=>P<j&&v.visible).length;return b.filter(v=>v.visible).slice(...y?[B+1]:[0,B]).reduce((v,P)=>v+(P.height||0)+k,0)},[n]);return l.useEffect(()=>{n.forEach(h=>{if(h.dismissed)i(h.id,h.removeDelay);else{let g=a.get(h.id);g&&(clearTimeout(g),a.delete(h.id))}})},[n,i]),{toasts:n,handlers:{updateHeight:c,startPause:d,endPause:u,calculateOffset:m}}},wn=G`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,jn=G`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Cn=G`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Sn=oe("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${wn} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${jn} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${r=>r.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Cn} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Bn=G`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,kn=oe("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${r=>r.secondary||"#e0e0e0"};
  border-right-color: ${r=>r.primary||"#616161"};
  animation: ${Bn} 1s linear infinite;
`,Tn=G`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,In=G`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Wn=oe("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Tn} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${In} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${r=>r.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Nn=oe("div")`
  position: absolute;
`,En=oe("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Rn=G`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,An=oe("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Rn} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Dn=({toast:r})=>{let{icon:t,type:n,iconTheme:s}=r;return t!==void 0?typeof t=="string"?l.createElement(An,null,t):t:n==="blank"?null:l.createElement(En,null,l.createElement(kn,{...s}),n!=="loading"&&l.createElement(Nn,null,n==="error"?l.createElement(Sn,{...s}):l.createElement(Wn,{...s})))},Pn=r=>`
0% {transform: translate3d(0,${r*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,zn=r=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${r*-150}%,-1px) scale(.6); opacity:0;}
`,Un="0%{opacity:0;} 100%{opacity:1;}",Ln="0%{opacity:1;} 100%{opacity:0;}",Fn=oe("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,$n=oe("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Mn=(r,t)=>{let n=r.includes("top")?1:-1,[s,a]=Bt()?[Un,Ln]:[Pn(n),zn(n)];return{animation:t?`${G(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${G(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},On=l.memo(({toast:r,position:t,style:n,children:s})=>{let a=r.height?Mn(r.position||t||"top-center",r.visible):{opacity:0},i=l.createElement(Dn,{toast:r}),o=l.createElement($n,{...r.ariaProps},ke(r.message,r));return l.createElement(Fn,{className:r.className,style:{...a,...n,...r.style}},typeof s=="function"?s({icon:i,message:o}):l.createElement(l.Fragment,null,i,o))});un(l.createElement);var _n=({id:r,className:t,style:n,onHeightUpdate:s,children:a})=>{let i=l.useCallback(o=>{if(o){let d=()=>{let c=o.getBoundingClientRect().height;s(r,c)};d(),new MutationObserver(d).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[r,s]);return l.createElement("div",{ref:i,className:t,style:n},a)},Xn=(r,t)=>{let n=r.includes("top"),s=n?{top:0}:{bottom:0},a=r.includes("center")?{justifyContent:"center"}:r.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Bt()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...s,...a}},Hn=We`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ve=16,qn=({reverseOrder:r,position:t="top-center",toastOptions:n,gutter:s,children:a,toasterId:i,containerStyle:o,containerClassName:d})=>{let{toasts:c,handlers:u}=vn(n,i);return l.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:ve,left:ve,right:ve,bottom:ve,pointerEvents:"none",...o},className:d,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map(m=>{let h=m.position||t,g=u.calculateOffset(m,{reverseOrder:r,gutter:s,defaultPosition:t}),y=Xn(h,g);return l.createElement(_n,{id:m.id,key:m.id,onHeightUpdate:u.updateHeight,className:m.visible?Hn:"",style:y},m.type==="custom"?ke(m.message,m):a?a(m):l.createElement(On,{toast:m,position:h}))}))},f=_;const Vn={apiKey:"AIzaSyDAVopTBDSikDCHqEnljBMfk6ml-rewiSE",authDomain:"cryptopay-e04c3.firebaseapp.com",projectId:"cryptopay-e04c3",storageBucket:"cryptopay-e04c3.firebasestorage.app",messagingSenderId:"935827653972",appId:"1:935827653972:web:7c2f3c14f4c6d57345f4c1",measurementId:"G-L7DXEYRW49"},Nt=Mt(Vn),fe=Ot(Nt),ee=_t(Nt),Yn="https://mongodb-1y1z.onrender.com/api";class Jn{async request(t,n={}){const s=`${Yn}${t}`,a={headers:{"Content-Type":"application/json",...n.headers},...n};try{const i=await fetch(s,a);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);return await i.json()}catch(i){throw console.error(`API request failed for ${t}:`,i),i}}async getUser(t){return this.request(`/users/${t}`)}async createUser(t){return this.request("/users",{method:"POST",body:JSON.stringify(t)})}async updateUser(t,n){return this.request(`/users/${t}`,{method:"PUT",body:JSON.stringify(n)})}async updateUserBalance(t,n,s){return this.request(`/users/${t}/balance`,{method:"PUT",body:JSON.stringify({currency:n,amount:s})})}async getUserTransactions(t,n,s=50){const a=new URLSearchParams;return n&&a.append("type",n),a.append("limit",s.toString()),this.request(`/transactions/${t}?${a}`)}async createTransaction(t){return this.request("/transactions",{method:"POST",body:JSON.stringify(t)})}async findUserByEmail(t){return this.request(`/users/email/${encodeURIComponent(t)}`)}async healthCheck(){return this.request("/health")}}const Y=new Jn;class Kn{constructor(){this.initializeApiService()}async initializeApiService(){try{await Y.healthCheck(),console.log("✅ API service connected successfully")}catch(t){console.error("❌ API service connection failed:",t)}}async createUser(t){const n={uid:t.uid,email:t.email,displayName:t.displayName||"",inrBalance:t.inrBalance||0,cryptoBalances:t.cryptoBalances||{BTC:0,USDT:0,BXC:0}};return await Y.createUser(n)}async getUserByUid(t){return await Y.getUser(t)}async updateUser(t,n){await Y.updateUser(t,n)}async updateUserBalance(t,n,s){await Y.updateUserBalance(t,n,s)}async createTransaction(t){return await Y.createTransaction(t)}async getUserTransactions(t,n,s=10){return await Y.getUserTransactions(t,n,s)}async getTransactionById(t){return console.warn("getTransactionById not implemented in API service"),null}async updateTransactionStatus(t,n){console.warn("updateTransactionStatus not implemented in API service")}async getUserBalances(t){const n=await this.getUserByUid(t);return n?{inrBalance:n.inrBalance,cryptoBalances:n.cryptoBalances}:null}async userExists(t){return await this.getUserByUid(t)!==null}async getTransactionCount(t,n){return(await this.getUserTransactions(t,n,1e3)).length}async initializeUserIfNotExists(t,n,s){let a=await this.getUserByUid(t);return a||(a=await this.createUser({uid:t,email:n,displayName:s||n.split("@")[0]}),console.log(`✅ Created new user: ${n}`)),a}}const se=new Kn,Et=l.createContext(void 0),H=()=>{const r=l.useContext(Et);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},Gn=({children:r})=>{const[t,n]=l.useState(null),[s,a]=l.useState(null),[i,o]=l.useState(!0),d=()=>{const j="0123456789abcdef";let B="0x";for(let v=0;v<40;v++)B+=j[Math.floor(Math.random()*j.length)];return B},c=async j=>{const B=await se.initializeUserIfNotExists(j.uid,j.email||"",j.displayName||void 0);return{userId:j.uid,email:B.email,displayName:B.displayName,walletAddress:d(),inrBalance:B.inrBalance,cryptoBalances:B.cryptoBalances,preferences:{emailNotifications:!0,pushNotifications:!1,autoRefresh:!0},createdAt:B.createdAt,updatedAt:B.updatedAt}},u=async j=>{try{const B=await se.getUserByUid(j.uid);if(B){const v={userId:j.uid,email:B.email,displayName:B.displayName,walletAddress:d(),inrBalance:B.inrBalance,cryptoBalances:B.cryptoBalances,preferences:{emailNotifications:!0,pushNotifications:!1,autoRefresh:!0},createdAt:B.createdAt,updatedAt:B.updatedAt};a(v)}else{const v=await c(j);a(v)}}catch(B){console.error("Error loading user profile:",B),f.error("Error loading profile")}},m=async(j,B)=>{try{await Vt(fe,j,B),f.success("Login successful!")}catch(v){throw console.error("Login error:",v),f.error(x(v.code)),v}},h=async(j,B)=>{try{await qt(fe,j,B),f.success("Account created successfully!")}catch(v){throw console.error("Signup error:",v),f.error(x(v.code)),v}},g=async()=>{try{await Ht(fe),a(null),f.success("Logged out successfully")}catch(j){throw console.error("Logout error:",j),f.error("Error logging out"),j}},y=async j=>{if(!(!t||!s))try{const B={};j.inrBalance!==void 0&&(B.inrBalance=j.inrBalance),j.cryptoBalances&&(B.cryptoBalances=j.cryptoBalances),j.email&&(B.email=j.email),j.displayName&&(B.displayName=j.displayName),await se.updateUser(t.uid,B);const v={...j,updatedAt:new Date};a(P=>P?{...P,...v}:null)}catch(B){throw console.error("Error updating profile:",B),f.error("Error updating profile"),B}},k=async()=>{t&&await u(t)},x=j=>{switch(j){case"auth/user-not-found":return"No account found with this email";case"auth/wrong-password":return"Incorrect password";case"auth/email-already-in-use":return"Email already registered";case"auth/weak-password":return"Password is too weak";case"auth/invalid-email":return"Invalid email address";default:return"An error occurred. Please try again."}};l.useEffect(()=>Xt(fe,async B=>{n(B),B?await u(B):a(null),o(!1)}),[]);const b={currentUser:t,userProfile:s,login:m,signup:h,logout:g,loading:i,updateUserProfile:y,refreshUserProfile:k};return e.jsx(Et.Provider,{value:b,children:!i&&r})},L={networks:{sepolia:{chainId:"0xaa36a7",chainName:"Sepolia test network",nativeCurrency:{name:"SepoliaETH",symbol:"SepoliaETH",decimals:18},rpcUrls:["https://sepolia.infura.io/v3/"],blockExplorerUrls:["https://sepolia.etherscan.io"],explorer:"https://sepolia.etherscan.io"}},contracts:{cryptoWallet:"0x981276d58f5f3e0e12591792fb0c661dda4efb25",usdt:"0x7169d38820dfd117c3fa1f2a5376148b2a5e7e3e",bxc:"0x5e4fd39a51aff44d437c2988e163c6880e819a6d"}},ot=[{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"usdtToken",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"bxcToken",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"depositCrypto",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdrawCrypto",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferCrypto",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"depositInr",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdrawInr",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"executeWithdrawalTo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"getContractBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"isTokenSupported",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"getSupportedTokens",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserBalances",outputs:[{internalType:"uint256",name:"usdtBalance",type:"uint256"},{internalType:"uint256",name:"bxcBalance",type:"uint256"},{internalType:"uint256",name:"inrBalance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getContractInfo",outputs:[{internalType:"string",name:"version",type:"string"},{internalType:"bool",name:"isPaused",type:"bool"},{internalType:"address",name:"contractOwner",type:"address"},{internalType:"address",name:"usdtAddress",type:"address"},{internalType:"address",name:"bxcAddress",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"address",name:"token",type:"address"}],name:"getUserCryptoBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserInrBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address",name:"recipient",type:"address"}],name:"emergencyRecover",outputs:[],stateMutability:"nonpayable",type:"function"}],lt=[{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burnFrom",outputs:[],stateMutability:"nonpayable",type:"function"}],De=[{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],Rt=l.createContext(void 0),pe=()=>{const r=l.useContext(Rt);if(r===void 0)throw new Error("useWeb3 must be used within a Web3Provider");return r},Qn=({children:r})=>{const[t,n]=l.useState(null),[s,a]=l.useState(null),[i,o]=l.useState(!1),[d,c]=l.useState(null),[u,m]=l.useState(null),{currentUser:h,updateUserProfile:g}=H(),y=async()=>{if(window.ethereum)try{const I=new Kt(window.ethereum);n(I);const E=new I.eth.Contract(ot,L.contracts.cryptoWallet);m(E);const D=await I.eth.getAccounts();if(D.length>0){a(D[0]),o(!0);const U=await I.eth.getChainId();c(`0x${U.toString(16)}`)}}catch(I){console.error("Error initializing Web3:",I)}},k=async()=>{if(!window.ethereum){f.error("Please install MetaMask!");return}try{const I=await window.ethereum.request({method:"eth_requestAccounts"});if(I.length>0){a(I[0]),o(!0);const E=await t.eth.getChainId();c(`0x${E.toString(16)}`),f.success("Wallet connected successfully!"),await b()}}catch(I){console.error("Error connecting wallet:",I),f.error("Failed to connect wallet")}},x=()=>{a(null),o(!1),c(null),m(null),f.success("Wallet disconnected")},b=async()=>{if(window.ethereum)try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:L.networks.sepolia.chainId}]})}catch(I){if(I.code===4902)try{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:L.networks.sepolia.chainId,chainName:L.networks.sepolia.chainName,nativeCurrency:L.networks.sepolia.nativeCurrency,rpcUrls:L.networks.sepolia.rpcUrls,blockExplorerUrls:L.networks.sepolia.blockExplorerUrls}]})}catch(E){console.error("Error adding Sepolia network:",E),f.error("Failed to add Sepolia network")}else console.error("Error switching to Sepolia:",I),f.error("Failed to switch to Sepolia network")}},j=()=>i?d===L.networks.sepolia.chainId?"Connected to Sepolia":"Wrong Network":"Not Connected",B=async()=>{if(!(!t||!s||!h))try{const E=await new t.eth.Contract(ot,L.contracts.cryptoWallet).methods.getUserBalances(s).call(),D=parseFloat(t.utils.fromWei(E.usdtBalance,"ether")),U=parseFloat(t.utils.fromWei(E.bxcBalance,"ether")),S=parseFloat(t.utils.fromWei(E.inrBalance,"ether")),w=new t.eth.Contract(De,L.contracts.usdt),p=new t.eth.Contract(lt,L.contracts.bxc),W=await w.methods.balanceOf(s).call(),R=await p.methods.balanceOf(s).call(),O=parseFloat(t.utils.fromWei(W,"ether")),X=parseFloat(t.utils.fromWei(R,"ether"));await g({cryptoBalances:{BTC:0,USDT:D+O,BXC:U+X},inrBalance:S})}catch(I){console.error("Error validating balances:",I);try{const E=new t.eth.Contract(De,L.contracts.usdt),D=new t.eth.Contract(lt,L.contracts.bxc),U=await E.methods.balanceOf(s).call(),S=await D.methods.balanceOf(s).call(),w=parseFloat(t.utils.fromWei(U,"ether")),p=parseFloat(t.utils.fromWei(S,"ether"));await g({cryptoBalances:{BTC:0,USDT:w,BXC:p}})}catch(E){console.error("Fallback balance check failed:",E)}}},v=async()=>{await B(),f.success("Balances refreshed!")},P=async(I,E)=>{if(h)try{await g({cryptoBalances:{BTC:I==="BTC"?E:0,USDT:I==="USDT"?E:0,BXC:I==="BXC"?E:0}})}catch(D){console.error("Error updating crypto balance:",D)}},F=async(I,E,D,U,S)=>{if(h)try{console.log("Transaction logged:",{type:I,amount:E,currency:D,description:U,txHash:S})}catch(w){console.error("Error logging transaction:",w)}},A=async(I,E)=>{if(!t||!s||!u)throw new Error("Web3 not connected");try{const D=new t.eth.Contract(De,I),U=t.utils.toWei(E,"ether"),S=await D.methods.allowance(s,L.contracts.cryptoWallet).call();if(parseInt(S)<parseInt(U)){const p=await D.methods.approve(L.contracts.cryptoWallet,U).send({from:s});console.log("Approval transaction:",p.transactionHash)}return(await u.methods.depositCrypto(I,U).send({from:s})).transactionHash}catch(D){throw console.error("Deposit error:",D),new Error(`Deposit failed: ${D.message}`)}},N=async(I,E)=>{if(!t||!s||!u)throw new Error("Web3 not connected");try{const D=t.utils.toWei(E,"ether");return(await u.methods.withdrawCrypto(I,D).send({from:s})).transactionHash}catch(D){throw console.error("Withdraw error:",D),new Error(`Withdraw failed: ${D.message}`)}},C=async(I,E,D)=>{if(!t||!s||!u)throw new Error("Web3 not connected");try{const U=t.utils.toWei(D,"ether");return(await u.methods.transferCrypto(I,E,U).send({from:s})).transactionHash}catch(U){throw console.error("Transfer error:",U),new Error(`Transfer failed: ${U.message}`)}},T=async()=>{if(!u)throw new Error("Contract not initialized");try{const I=await u.methods.getContractInfo().call();return{version:I.version,isPaused:I.isPaused,contractOwner:I.contractOwner,usdtAddress:I.usdtAddress,bxcAddress:I.bxcAddress}}catch(I){throw console.error("Get contract info error:",I),new Error(`Failed to get contract info: ${I.message}`)}},z=async()=>{if(!u)return!1;try{return await u.methods.paused().call()}catch(I){return console.error("Check paused status error:",I),!1}};l.useEffect(()=>(y(),window.ethereum&&(window.ethereum.on("accountsChanged",I=>{I.length>0?(a(I[0]),o(!0)):(a(null),o(!1))}),window.ethereum.on("chainChanged",I=>{c(I)})),()=>{window.ethereum&&(window.ethereum.removeAllListeners("accountsChanged"),window.ethereum.removeAllListeners("chainChanged"))}),[]);const $={web3:t,account:s,isConnected:i,chainId:d,contract:u,connectWallet:k,disconnectWallet:x,switchToSepolia:b,getNetworkStatus:j,validateUserBalances:B,refreshAllBalances:v,updateUserCryptoBalance:P,logTransaction:F,depositCrypto:A,withdrawCrypto:N,transferCrypto:C,getContractInfo:T,isContractPaused:z};return e.jsx(Rt.Provider,{value:$,children:r})},At=l.createContext(void 0),Ee=()=>{const r=l.useContext(At);if(r===void 0)throw new Error("useCryptoPrices must be used within a CryptoPriceProvider");return r},Zn=({children:r})=>{const[t,n]=l.useState({BTC:45e5,USDT:83,BXC:25}),[s,a]=l.useState(!1),[i,o]=l.useState(null),d=async()=>{var y,k;a(!0);try{const j=()=>.99+Math.random()*.02;let v={bitcoin:{inr:Math.round(45e5*j())},tether:{inr:Math.round(83.5*j()*100)/100}};if(v&&v.bitcoin&&v.tether)n({BTC:((y=v.bitcoin)==null?void 0:y.inr)||45e5,USDT:((k=v.tether)==null?void 0:k.inr)||83,BXC:25}),o(new Date);else throw new Error("No valid price data received")}catch(x){console.warn("All price APIs failed, using fallback prices:",x);const b=45e5,j=83,B=.98+Math.random()*.04;n(v=>({BTC:v.BTC||Math.round(b*B),USDT:v.USDT||Math.round(j*B*100)/100,BXC:25})),i||o(new Date)}finally{a(!1)}},c=async()=>{await d()},u=async()=>{await d()},m=(y,k)=>y*t[k],h=(y,k)=>y/t[k];l.useEffect(()=>{d();const y=setInterval(()=>{d()},6e4);return()=>clearInterval(y)},[]);const g={prices:t,loading:s,lastUpdated:i,refreshPrices:c,fetchPrices:u,convertToINR:m,convertFromINR:h};return e.jsx(At.Provider,{value:g,children:r})},ce=({children:r})=>{const{currentUser:t,loading:n}=H();return n?e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",color:"white",fontSize:"1.2rem"},children:[e.jsx("i",{className:"fas fa-spinner fa-spin",style:{marginRight:"1rem",fontSize:"2rem"}}),"Loading..."]}):t?e.jsx(e.Fragment,{children:r}):e.jsx(jt,{to:"/",replace:!0})},Dt=({type:r,onClose:t,onSwitchType:n})=>{const[s,a]=l.useState(""),[i,o]=l.useState(""),[d,c]=l.useState(""),[u,m]=l.useState(!1),{login:h,signup:g}=H();l.useEffect(()=>{const x=b=>{b.key==="Escape"&&t()};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[t]);const y=async x=>{if(x.preventDefault(),!s||!i){f.error("Please fill in all fields");return}if(r==="signup"){if(i!==d){f.error("Passwords do not match");return}if(i.length<6){f.error("Password must be at least 6 characters");return}}try{m(!0),r==="login"?(await h(s,i),f.success("Welcome back!")):(await g(s,i),f.success("Account created successfully!")),t()}catch(b){console.error("Auth error:",b),f.error(b.message||"An error occurred")}finally{m(!1)}},k=x=>{x.target===x.currentTarget&&t()};return e.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:50,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem"},onClick:k,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 10px 25px rgba(0,0,0,0.1)",maxWidth:"400px",width:"100%",maxHeight:"90vh",overflowY:"auto"},children:[e.jsxs("div",{style:{padding:"1.5rem",borderBottom:"1px solid #eee"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",textAlign:"center",marginBottom:"0.5rem"},children:r==="login"?"Welcome Back":"Create Account"}),e.jsx("p",{style:{textAlign:"center",color:"#666"},children:r==="login"?"Sign in to access your crypto wallet":"Join thousands of users trading crypto"}),e.jsx("button",{onClick:t,style:{position:"absolute",top:"1rem",right:"1rem",background:"none",border:"none",fontSize:"1.2rem",cursor:"pointer"},children:"×"})]}),e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsxs("form",{onSubmit:y,style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Email Address"}),e.jsx("input",{type:"email",value:s,onChange:x=>a(x.target.value),placeholder:"Enter your email",required:!0,style:{width:"100%"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Password"}),e.jsx("input",{type:"password",value:i,onChange:x=>o(x.target.value),placeholder:"Enter your password",required:!0,style:{width:"100%"}})]}),r==="signup"&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Confirm Password"}),e.jsx("input",{type:"password",value:d,onChange:x=>c(x.target.value),placeholder:"Confirm your password",required:!0,style:{width:"100%"}})]}),e.jsx("button",{type:"submit",disabled:u,style:{width:"100%",padding:"0.75rem",fontSize:"1rem",fontWeight:"600",background:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:u?"not-allowed":"pointer",opacity:u?.6:1},children:u?"Processing...":r==="login"?"Sign In":"Create Account"})]}),e.jsx("div",{style:{marginTop:"1.5rem",textAlign:"center"},children:e.jsxs("p",{style:{color:"#666"},children:[r==="login"?"Don't have an account?":"Already have an account?",e.jsx("button",{onClick:()=>n(r==="login"?"signup":"login"),style:{marginLeft:"0.5rem",color:"#007bff",background:"none",border:"none",textDecoration:"underline",cursor:"pointer"},children:r==="login"?"Sign Up":"Sign In"})]})})]})]})})},es=()=>{const[r,t]=l.useState(!1),[n,s]=l.useState("login"),{currentUser:a,logout:i}=H(),{account:o,isConnected:d}=pe(),c=me(),u={uid:"zgtQXvwBhMbHR4FcdduoNF7sbhl1"},h=a&&a.uid===u.uid&&d&&o==="0x76b16F59Cfab5DdaE5D149BE98E5d755F939572A",g=async()=>{try{await i()}catch(x){console.error("Logout failed:",x)}},y=x=>{s(x),t(!0)},k=x=>c.pathname===x;return e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:"animate-fadeInUp",style:{padding:"0.5rem 0"},children:e.jsxs("div",{className:"container",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(Z,{to:"/",className:"hover-glow",style:{textDecoration:"none",fontSize:"1.4rem",fontWeight:"800",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",transition:"all 0.3s ease"},children:"🚀 CryptoPay"}),e.jsx("div",{className:"animate-fadeInRight",style:{display:"flex",alignItems:"center",gap:"1rem",position:"relative",zIndex:1001},children:a?e.jsxs(e.Fragment,{children:[e.jsx(Z,{to:"/dashboard",className:"hover-lift",style:{textDecoration:"none",color:k("/dashboard")?"#ffd700":"#ffffff",padding:"0.5rem 1rem",borderRadius:"12px",fontWeight:"600",fontSize:"0.9rem",background:k("/dashboard")?"rgba(255, 215, 0, 0.1)":"transparent",border:k("/dashboard")?"1px solid rgba(255, 215, 0, 0.3)":"1px solid transparent",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer"},children:"📊 Dashboard"}),e.jsx(Z,{to:"/deposit",className:"hover-lift",style:{textDecoration:"none",color:k("/deposit")?"#ffd700":"#ffffff",padding:"0.5rem 1rem",borderRadius:"12px",fontWeight:"600",fontSize:"0.9rem",background:k("/deposit")?"rgba(255, 215, 0, 0.1)":"transparent",border:k("/deposit")?"1px solid rgba(255, 215, 0, 0.3)":"1px solid transparent",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer"},children:"💰 Deposit"}),e.jsx(Z,{to:"/withdraw",className:"hover-lift",style:{textDecoration:"none",color:k("/withdraw")?"#ffd700":"#ffffff",padding:"0.5rem 1rem",borderRadius:"12px",fontWeight:"600",fontSize:"0.9rem",background:k("/withdraw")?"rgba(255, 215, 0, 0.1)":"transparent",border:k("/withdraw")?"1px solid rgba(255, 215, 0, 0.3)":"1px solid transparent",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer"},children:"🏦 Withdraw"}),e.jsx(Z,{to:"/send",className:"hover-lift",style:{textDecoration:"none",color:k("/send")?"#ffd700":"#ffffff",padding:"0.5rem 1rem",borderRadius:"12px",fontWeight:"600",fontSize:"0.9rem",background:k("/send")?"rgba(255, 215, 0, 0.1)":"transparent",border:k("/send")?"1px solid rgba(255, 215, 0, 0.3)":"1px solid transparent",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer"},children:"📤 Send"}),e.jsx(Z,{to:"/history",className:"hover-lift",style:{textDecoration:"none",color:k("/history")?"#ffd700":"#ffffff",padding:"0.5rem 1rem",borderRadius:"12px",fontWeight:"600",fontSize:"0.9rem",background:k("/history")?"rgba(255, 215, 0, 0.1)":"transparent",border:k("/history")?"1px solid rgba(255, 215, 0, 0.3)":"1px solid transparent",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer"},children:"📋 History"}),e.jsx(Z,{to:"/profile",className:"hover-lift",style:{textDecoration:"none",color:k("/profile")?"#ffd700":"#ffffff",padding:"0.5rem 1rem",borderRadius:"12px",fontWeight:"600",fontSize:"0.9rem",background:k("/profile")?"rgba(255, 215, 0, 0.1)":"transparent",border:k("/profile")?"1px solid rgba(255, 215, 0, 0.3)":"1px solid transparent",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer"},children:"👤 Profile"}),h&&e.jsx(Z,{to:"/admin-withdrawals",className:"hover-lift",style:{textDecoration:"none",color:(k("/admin-withdrawals"),"#ff6b6b"),padding:"0.5rem 1rem",borderRadius:"12px",fontWeight:"600",fontSize:"0.9rem",background:(k("/admin-withdrawals"),"rgba(255, 107, 107, 0.1)"),border:(k("/admin-withdrawals"),"1px solid rgba(255, 107, 107, 0.3)"),transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",boxShadow:"0 4px 16px rgba(255, 107, 107, 0.2)"},children:"👑 Admin"}),e.jsx("button",{onClick:g,className:"btn-danger hover-lift",style:{padding:"0.5rem 1rem",borderRadius:"12px",fontWeight:"600",fontSize:"0.9rem"},children:"🚪 Logout"})]}):e.jsxs("div",{className:"animate-fadeInRight",style:{display:"flex",gap:"1rem"},children:[e.jsx("button",{onClick:()=>y("login"),className:"hover-lift",style:{background:"rgba(255, 215, 0, 0.1)",color:"#ffd700",border:"1px solid rgba(255, 215, 0, 0.3)",padding:"0.5rem 1rem",borderRadius:"12px",fontWeight:"600",fontSize:"0.9rem"},children:"🔑 Login"}),e.jsx("button",{onClick:()=>y("signup"),className:"hover-lift",style:{background:"linear-gradient(135deg, #000000 0%, #ffd700 100%)",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"12px",fontWeight:"600",fontSize:"0.9rem",boxShadow:"0 8px 32px rgba(255, 215, 0, 0.3)"},children:"🚀 Get Started"})]})})]})}),r&&e.jsx(Dt,{type:n,onClose:()=>t(!1),onSwitchType:x=>s(x)})]})},ts=()=>{const[r,t]=l.useState(!1),[n,s]=l.useState("login"),{currentUser:a}=H(),i=Q();l.useEffect(()=>{a&&i("/dashboard")},[a,i]);const o=()=>{s("signup"),t(!0)},d=()=>{s("login"),t(!0)};return e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"animate-fadeInUp",style:{padding:"6rem 0",textAlign:"center",position:"relative",overflow:"hidden"},children:e.jsxs("div",{className:"container",children:[e.jsx("h1",{style:{fontSize:"4rem",fontWeight:"800",marginBottom:"1.5rem",background:"linear-gradient(135deg, #ffd700 0%, #ffed4e 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",lineHeight:"1.2"},children:"🚀 INR ↔ Crypto Platform"}),e.jsx("p",{style:{fontSize:"1.4rem",color:"rgba(255, 255, 255, 0.9)",marginBottom:"3rem",maxWidth:"700px",margin:"0 auto 3rem",fontWeight:"500",lineHeight:"1.6"},children:"Seamlessly deposit, withdraw, and transfer between INR and cryptocurrencies. Join the future of digital finance with enterprise-grade security."}),e.jsxs("div",{className:"animate-fadeInUp",style:{display:"flex",gap:"1.5rem",justifyContent:"center",marginTop:"2rem"},children:[e.jsx("button",{onClick:o,className:"hover-lift",style:{padding:"1.25rem 2.5rem",fontSize:"1.2rem",fontWeight:"700",background:"linear-gradient(135deg, #000000 0%, #ffd700 100%)",color:"white",border:"none",borderRadius:"20px",cursor:"pointer",boxShadow:"0 15px 35px rgba(255, 215, 0, 0.4)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:"🚀 Get Started Free"}),e.jsx("button",{onClick:d,className:"hover-lift",style:{padding:"1.25rem 2.5rem",fontSize:"1.2rem",fontWeight:"700",background:"rgba(255, 215, 0, 0.1)",color:"#ffd700",border:"2px solid rgba(255, 215, 0, 0.3)",borderRadius:"20px",cursor:"pointer",backdropFilter:"blur(10px)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:"🔑 Login"})]})]})}),e.jsx("section",{className:"animate-fadeInUp",style:{padding:"6rem 0"},children:e.jsxs("div",{className:"container",children:[e.jsx("h2",{style:{fontSize:"3rem",fontWeight:"800",textAlign:"center",marginBottom:"4rem",background:"linear-gradient(135deg, #ffd700 0%, #ffed4e 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"✨ Platform Features"}),e.jsxs("div",{className:"grid grid-cols-4",style:{gap:"2rem"},children:[e.jsxs("div",{className:"card hover-lift animate-fadeInLeft",style:{textAlign:"center",background:"linear-gradient(135deg, rgba(255, 215, 0, 0.05) 0%, rgba(255, 215, 0, 0.02) 100%)",border:"1px solid rgba(255, 215, 0, 0.2)",padding:"2rem"},children:[e.jsx("div",{style:{fontSize:"3.5rem",marginBottom:"1.5rem"},children:"🔐"}),e.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"700",marginBottom:"1.5rem",color:"#ffd700"},children:"Secure Wallet"}),e.jsx("p",{style:{color:"rgba(255, 255, 255, 0.8)",fontSize:"1.1rem",lineHeight:"1.6"},children:"Multi-cryptocurrency wallet with BEP-20 support and enterprise-grade security"})]}),e.jsxs("div",{className:"card hover-lift animate-fadeInUp",style:{textAlign:"center",background:"linear-gradient(135deg, rgba(255, 215, 0, 0.05) 0%, rgba(255, 215, 0, 0.02) 100%)",border:"1px solid rgba(255, 215, 0, 0.2)",padding:"2rem"},children:[e.jsx("div",{style:{fontSize:"3.5rem",marginBottom:"1.5rem"},children:"⚡"}),e.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"700",marginBottom:"1.5rem",color:"#ffd700"},children:"Instant Exchange"}),e.jsx("p",{style:{color:"rgba(255, 255, 255, 0.8)",fontSize:"1.1rem",lineHeight:"1.6"},children:"Real-time INR to crypto conversion with competitive rates"})]}),e.jsxs("div",{className:"card hover-lift animate-fadeInUp",style:{textAlign:"center",background:"linear-gradient(135deg, rgba(255, 215, 0, 0.05) 0%, rgba(255, 215, 0, 0.02) 100%)",border:"1px solid rgba(255, 215, 0, 0.2)",padding:"2rem"},children:[e.jsx("div",{style:{fontSize:"3.5rem",marginBottom:"1.5rem"},children:"🛡️"}),e.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"700",marginBottom:"1.5rem",color:"#ffd700"},children:"Smart Contracts"}),e.jsx("p",{style:{color:"rgba(255, 255, 255, 0.8)",fontSize:"1.1rem",lineHeight:"1.6"},children:"Sepolia testnet powered secure transactions with full transparency"})]}),e.jsxs("div",{className:"card hover-lift animate-fadeInRight",style:{textAlign:"center",background:"linear-gradient(135deg, rgba(255, 215, 0, 0.05) 0%, rgba(255, 215, 0, 0.02) 100%)",border:"1px solid rgba(255, 215, 0, 0.2)",padding:"2rem"},children:[e.jsx("div",{style:{fontSize:"3.5rem",marginBottom:"1.5rem"},children:"📈"}),e.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"700",marginBottom:"1.5rem",color:"#ffd700"},children:"Live Prices"}),e.jsx("p",{style:{color:"rgba(255, 255, 255, 0.8)",fontSize:"1.1rem",lineHeight:"1.6"},children:"Real-time cryptocurrency pricing from multiple exchanges"})]})]})]})}),e.jsx("section",{style:{padding:"4rem 0",background:"transparent"},children:e.jsxs("div",{className:"container",children:[e.jsx("h2",{style:{fontSize:"2.5rem",fontWeight:"bold",textAlign:"center",marginBottom:"3rem"},children:"About Our Platform"}),e.jsxs("div",{className:"grid grid-cols-2",style:{gap:"4rem",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem"},children:"Secure & Reliable"}),e.jsx("p",{style:{marginBottom:"2rem",color:"#666",lineHeight:"1.6"},children:"Built with enterprise-grade security using Firebase Authentication and Firestore database. All transactions are secured and encrypted."}),e.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem"},children:"Multi-Crypto Support"}),e.jsx("p",{style:{marginBottom:"2rem",color:"#666",lineHeight:"1.6"},children:"Support for Bitcoin (BTC), USDT (BEP-20), and custom BXC token. Easy conversion between INR and cryptocurrencies."}),e.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem"},children:"Real-Time Updates"}),e.jsx("p",{style:{color:"#666",lineHeight:"1.6"},children:"Live price feeds from CoinGecko/Binance APIs. Auto-refresh balances and prices every 60 seconds."})]}),e.jsx("div",{children:e.jsxs("div",{className:"grid",style:{gap:"1rem"},children:[e.jsxs("div",{className:"card text-center",children:[e.jsx("h4",{style:{fontSize:"2rem",fontWeight:"bold",color:"#007bff"},children:"500+"}),e.jsx("p",{style:{color:"#666"},children:"Active Users"})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("h4",{style:{fontSize:"2rem",fontWeight:"bold",color:"#007bff"},children:"₹10M+"}),e.jsx("p",{style:{color:"#666"},children:"Total Volume"})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("h4",{style:{fontSize:"2rem",fontWeight:"bold",color:"#007bff"},children:"99.9%"}),e.jsx("p",{style:{color:"#666"},children:"Uptime"})]})]})})]})]})}),e.jsx("section",{style:{padding:"4rem 0",background:"transparent",color:"white",textAlign:"center"},children:e.jsxs("div",{className:"container",children:[e.jsx("h2",{style:{fontSize:"2.5rem",fontWeight:"bold",marginBottom:"1rem"},children:"Ready to Start Trading?"}),e.jsx("p",{style:{fontSize:"1.2rem",marginBottom:"2rem",opacity:.9},children:"Join thousands of users who trust our platform for their crypto needs. Start your journey today with zero fees for the first month."}),e.jsx("button",{onClick:o,style:{padding:"1rem 2rem",fontSize:"1.1rem",fontWeight:"bold",background:"white",color:"#007bff",border:"none",borderRadius:"8px",cursor:"pointer"},children:"Get Started Now"})]})}),e.jsx("footer",{style:{background:"#333",color:"white",padding:"3rem 0"},children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"grid grid-cols-4",style:{gap:"2rem",marginBottom:"2rem"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{marginBottom:"1rem"},children:"CryptoPay"}),e.jsx("p",{style:{color:"#ccc"},children:"Your trusted partner in cryptocurrency trading and management."})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"1rem"},children:"Quick Links"}),e.jsxs("ul",{style:{listStyle:"none"},children:[e.jsx("li",{style:{marginBottom:"0.5rem"},children:e.jsx("a",{href:"#home",style:{color:"#ccc",textDecoration:"none"},children:"Home"})}),e.jsx("li",{style:{marginBottom:"0.5rem"},children:e.jsx("a",{href:"#features",style:{color:"#ccc",textDecoration:"none"},children:"Features"})}),e.jsx("li",{style:{marginBottom:"0.5rem"},children:e.jsx("a",{href:"#about",style:{color:"#ccc",textDecoration:"none"},children:"About"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"1rem"},children:"Support"}),e.jsxs("ul",{style:{listStyle:"none"},children:[e.jsx("li",{style:{marginBottom:"0.5rem"},children:e.jsx("a",{href:"#",style:{color:"#ccc",textDecoration:"none"},children:"Help Center"})}),e.jsx("li",{style:{marginBottom:"0.5rem"},children:e.jsx("a",{href:"#",style:{color:"#ccc",textDecoration:"none"},children:"Contact Us"})}),e.jsx("li",{style:{marginBottom:"0.5rem"},children:e.jsx("a",{href:"#",style:{color:"#ccc",textDecoration:"none"},children:"Privacy Policy"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"1rem"},children:"Connect"}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx("a",{href:"#",style:{color:"#ccc",fontSize:"1.5rem",textDecoration:"none"},children:"📱"}),e.jsx("a",{href:"#",style:{color:"#ccc",fontSize:"1.5rem",textDecoration:"none"},children:"💬"}),e.jsx("a",{href:"#",style:{color:"#ccc",fontSize:"1.5rem",textDecoration:"none"},children:"🎮"})]})]})]}),e.jsx("div",{style:{textAlign:"center",paddingTop:"2rem",borderTop:"1px solid #555"},children:e.jsx("p",{style:{color:"#ccc"},children:"© 2024 CryptoPay. All rights reserved."})})]})}),r&&e.jsx(Dt,{type:n,onClose:()=>t(!1),onSwitchType:c=>s(c)})]})},rs=()=>{const[r,t]=l.useState({amount:"",currency:"BTC"}),[n,s]=l.useState({amount:"",currency:"BTC"}),{userProfile:a,refreshUserProfile:i}=H(),{account:o,isConnected:d,connectWallet:c}=pe(),{prices:u,convertToINR:m,convertFromINR:h}=Ee(),g=Q();l.useEffect(()=>{const x=()=>{i()};return window.addEventListener("balanceUpdated",x),()=>{window.removeEventListener("balanceUpdated",x)}},[i]);const y=x=>{if(x==="inr-to-crypto"){const b=parseFloat(r.amount)||0;if(b>0)return`≈ ${h(b,r.currency).toFixed(8)} ${r.currency}`}else{const b=parseFloat(n.amount)||0;if(b>0)return`≈ ₹${m(b,n.currency).toFixed(2)}`}return"₹0.00"},k=[{title:"Deposit Money",description:"Add INR or crypto to your wallet",path:"/deposit"},{title:"Withdraw Funds",description:"Convert and withdraw to bank or wallet",path:"/withdraw"},{title:"Send Money",description:"Transfer to other users instantly",path:"/send"},{title:"View History",description:"Track all your transactions",path:"/history"}];return a?e.jsx("div",{style:{padding:"2rem 0"},children:e.jsxs("div",{className:"container",children:[e.jsx("div",{style:{marginBottom:"2rem"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"bold",marginBottom:"0.5rem",background:"linear-gradient(135deg, #ffd700 0%, #ffed4e 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Welcome back! 👋"}),e.jsx("p",{style:{color:"rgba(255, 255, 255, 0.8)",fontSize:"1.1rem"},children:"Here's your crypto portfolio overview"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("div",{style:{padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.9rem",fontWeight:"500",background:d?"rgba(255, 215, 0, 0.1)":"rgba(255, 0, 0, 0.1)",color:d?"#ffd700":"#ff6b6b",border:`1px solid ${d?"rgba(255, 215, 0, 0.3)":"rgba(255, 0, 0, 0.3)"}`},children:d?`Connected: ${o==null?void 0:o.slice(0,6)}...${o==null?void 0:o.slice(-4)}`:"Wallet Disconnected"}),!d&&e.jsx("button",{onClick:c,className:"hover-lift",style:{background:"linear-gradient(135deg, #000000 0%, #ffd700 100%)",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"12px",fontWeight:"600",boxShadow:"0 8px 32px rgba(255, 215, 0, 0.3)"},children:"Connect Wallet"})]})]})}),e.jsxs("div",{className:"grid grid-cols-4",style:{gap:"1.5rem",marginBottom:"2rem"},children:[e.jsxs("div",{className:"card hover-lift",style:{background:"linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, rgba(255, 215, 0, 0.05) 100%)",border:"1px solid rgba(255, 215, 0, 0.3)"},children:[e.jsx("h3",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.9rem",marginBottom:"0.5rem"},children:"INR Balance"}),e.jsxs("p",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem",color:"#ffd700"},children:["₹",a.inrBalance.toLocaleString("en-IN",{minimumFractionDigits:2})]}),e.jsx("p",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.8rem"},children:"Available for trading"})]}),e.jsxs("div",{className:"card hover-lift",style:{background:"linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, rgba(255, 215, 0, 0.05) 100%)",border:"1px solid rgba(255, 215, 0, 0.3)"},children:[e.jsx("h3",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.9rem",marginBottom:"0.5rem"},children:"Bitcoin"}),e.jsx("p",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem",color:"#ffd700"},children:a.cryptoBalances.BTC.toFixed(8)}),e.jsxs("p",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.8rem"},children:["≈ ₹",m(a.cryptoBalances.BTC,"BTC").toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"card hover-lift",style:{background:"linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, rgba(255, 215, 0, 0.05) 100%)",border:"1px solid rgba(255, 215, 0, 0.3)"},children:[e.jsx("h3",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.9rem",marginBottom:"0.5rem"},children:"USDT"}),e.jsx("p",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem",color:"#ffd700"},children:a.cryptoBalances.USDT.toFixed(2)}),e.jsxs("p",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.8rem"},children:["≈ ₹",m(a.cryptoBalances.USDT,"USDT").toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"card hover-lift",style:{background:"linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, rgba(255, 215, 0, 0.05) 100%)",border:"1px solid rgba(255, 215, 0, 0.3)"},children:[e.jsx("h3",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.9rem",marginBottom:"0.5rem"},children:"BXC Token"}),e.jsx("p",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem",color:"#ffd700"},children:a.cryptoBalances.BXC.toFixed(2)}),e.jsxs("p",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.8rem"},children:["≈ ₹",m(a.cryptoBalances.BXC,"BXC").toLocaleString("en-IN")]})]})]}),e.jsxs("div",{className:"grid grid-cols-3",style:{gap:"2rem"},children:[e.jsxs("div",{style:{gridColumn:"span 2",display:"flex",flexDirection:"column",gap:"1.5rem"},children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{borderBottom:"1px solid #eee",paddingBottom:"1rem",marginBottom:"1rem"},children:e.jsx("h3",{style:{fontSize:"1.3rem",fontWeight:"bold"},children:"INR to Crypto Converter"})}),e.jsxs("div",{className:"grid grid-cols-2",style:{gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Amount (INR)"}),e.jsx("input",{type:"number",value:r.amount,onChange:x=>t(b=>({...b,amount:x.target.value})),placeholder:"Enter INR amount",style:{width:"100%"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Convert to"}),e.jsxs("select",{value:r.currency,onChange:x=>t(b=>({...b,currency:x.target.value})),style:{width:"100%"},children:[e.jsx("option",{value:"BTC",children:"Bitcoin (BTC)"}),e.jsx("option",{value:"USDT",children:"USDT"}),e.jsx("option",{value:"BXC",children:"BXC Token"})]})]})]}),e.jsx("div",{style:{marginTop:"1rem",padding:"1rem",background:"#f8f9fa",borderRadius:"8px"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.5rem"},children:"You will receive"}),e.jsx("p",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#007bff"},children:y("inr-to-crypto")})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{borderBottom:"1px solid #eee",paddingBottom:"1rem",marginBottom:"1rem"},children:e.jsx("h3",{style:{fontSize:"1.3rem",fontWeight:"bold"},children:"Crypto to INR Converter"})}),e.jsxs("div",{className:"grid grid-cols-2",style:{gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Cryptocurrency"}),e.jsxs("select",{value:n.currency,onChange:x=>s(b=>({...b,currency:x.target.value})),style:{width:"100%"},children:[e.jsx("option",{value:"BTC",children:"Bitcoin (BTC)"}),e.jsx("option",{value:"USDT",children:"USDT"}),e.jsx("option",{value:"BXC",children:"BXC Token"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Amount"}),e.jsx("input",{type:"number",value:n.amount,onChange:x=>s(b=>({...b,amount:x.target.value})),placeholder:"Enter crypto amount",step:"0.00000001",style:{width:"100%"}})]})]}),e.jsx("div",{style:{marginTop:"1rem",padding:"1rem",background:"#f8f9fa",borderRadius:"8px"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.5rem"},children:"You will receive"}),e.jsx("p",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#28a745"},children:y("crypto-to-inr")})]})})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{borderBottom:"1px solid #eee",paddingBottom:"1rem",marginBottom:"1rem"},children:e.jsx("h3",{style:{fontSize:"1.3rem",fontWeight:"bold"},children:"Quick Actions"})}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:k.map((x,b)=>e.jsxs("button",{onClick:()=>g(x.path),style:{width:"100%",padding:"1rem",textAlign:"left",background:"none",border:"none",borderRadius:"8px",cursor:"pointer",display:"flex",flexDirection:"column",gap:"0.25rem"},onMouseEnter:j=>{j.currentTarget.style.background="#f8f9fa"},onMouseLeave:j=>{j.currentTarget.style.background="none"},children:[e.jsx("h4",{style:{fontWeight:"600",color:"#333",margin:0},children:x.title}),e.jsx("p",{style:{fontSize:"0.9rem",color:"#666",margin:0},children:x.description})]},b))})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{borderBottom:"1px solid #eee",paddingBottom:"1rem",marginBottom:"1rem"},children:e.jsx("h3",{style:{fontSize:"1.3rem",fontWeight:"bold"},children:"Live Prices"})}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Object.entries(u).map(([x,b])=>e.jsxs("div",{style:{padding:"0.75rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontWeight:"600",margin:0},children:x}),e.jsx("p",{style:{fontSize:"0.8rem",color:"#666",margin:0},children:x==="BTC"?"Bitcoin":x==="USDT"?"Tether USD":"BXC Token"})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("p",{style:{fontWeight:"bold",margin:0},children:["₹",b.toLocaleString("en-IN",{minimumFractionDigits:2})]}),e.jsx("p",{style:{fontSize:"0.8rem",color:"#28a745",margin:0},children:"+0.5%"})]})]},x))})]})]})]})]})}):e.jsx("div",{style:{padding:"4rem 0",textAlign:"center"},children:e.jsx("p",{children:"Loading your dashboard..."})})};class q{static async logTransaction(t){var n;try{const s={userId:t.userId,type:t.type,amount:t.amount,currency:t.currency,description:t.description,status:t.status,orderId:t.orderId,paymentId:t.paymentId,txHash:t.txHash,timestamp:new Date};return((n=(await se.createTransaction(s))._id)==null?void 0:n.toString())||""}catch(s){throw console.error("Error logging transaction:",s),s}}static async getUserTransactions(t,n,s=50){try{return(await se.getUserTransactions(t,n,s)).map(i=>{var o;return{id:(o=i._id)==null?void 0:o.toString(),userId:i.userId,type:i.type,amount:i.amount,currency:i.currency,description:i.description,status:i.status,timestamp:i.timestamp,txHash:i.txHash,orderId:i.orderId,paymentId:i.paymentId}})}catch(a){return console.error("Error fetching transactions:",a),[]}}static async getRecentDeposits(t,n=10){return this.getUserTransactions(t,"deposit",n)}static async getRecentWithdrawals(t,n=10){return this.getUserTransactions(t,"withdrawal",n)}static async getRecentTransfers(t,n=10){const s=await this.getUserTransactions(t,"send",n),a=await this.getUserTransactions(t,"receive",n),i=[...s,...a];return i.sort((o,d)=>new Date(d.timestamp).getTime()-new Date(o.timestamp).getTime()),i.slice(0,n)}static formatAmount(t,n){return n==="INR"?`₹${t.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`:n==="BTC"?`${t.toFixed(8)} BTC`:n==="USDT"?`${t.toFixed(2)} USDT`:n==="BXC"?`${t.toFixed(2)} BXC`:`${t} ${n}`}static formatDate(t){const n=t instanceof Date?t:new Date(t),a=(new Date().getTime()-n.getTime())/(1e3*60*60);if(a<1)return"Just now";if(a<24){const i=Math.floor(a);return`${i} hour${i>1?"s":""} ago`}else return a<48?"Yesterday, "+n.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):n.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}static getCurrencyIcon(t){return{INR:"fas fa-rupee-sign",BTC:"fab fa-bitcoin",USDT:"fas fa-dollar-sign",BXC:"fas fa-coins"}[t]||"fas fa-rupee-sign"}static getCurrencyIconClass(t){return{INR:"inr",BTC:"btc",USDT:"usdt",BXC:"bxc"}[t]||"inr"}static getStatusClass(t){return{completed:"success",pending:"pending",failed:"failed",processing:"pending"}[t]||"pending"}static getStatusIcon(t){return{completed:"fas fa-check",pending:"fas fa-clock",failed:"fas fa-times",processing:"fas fa-spinner fa-spin"}[t]||"fas fa-clock"}static getStatusText(t){return{completed:"Completed",pending:"Pending",failed:"Failed",processing:"Processing"}[t]||"Pending"}}const ns={sandbox:{appId:"YOUR_SANDBOX_APP_ID",secretKey:"YOUR_SANDBOX_SECRET_KEY",baseUrl:"https://sandbox.cashfree.com/pg/orders",apiVersion:"2022-09-01"},production:{appId:"PROD_APP_ID",secretKey:"PROD_SECRET_KEY",baseUrl:"https://api.cashfree.com/pg/orders",apiVersion:"2022-09-01"},currentEnvironment:"sandbox",getCurrentConfig(){return this[this.currentEnvironment]},getBaseUrl(){return this.getCurrentConfig().baseUrl},getApiVersion(){return this.getCurrentConfig().apiVersion},getAppId(){return this.getCurrentConfig().appId},getSecretKey(){return this.getCurrentConfig().secretKey}};class ss{constructor(){le(this,"cashfree",null);le(this,"currentOrder",null);le(this,"isProcessing",!1);le(this,"isInitialized",!1);le(this,"config");console.log("CashfreeManager constructor called"),this.config=ns.getCurrentConfig(),console.log("CashfreeManager config:",this.config),this.init().then(()=>{this.isInitialized=!0,console.log("CashfreeManager fully initialized")}).catch(t=>{console.error("CashfreeManager initialization failed:",t),this.createFallbackIntegration()})}async init(){try{console.log("CashfreeManager init called"),console.log("Creating fallback Cashfree integration..."),await this.createFallbackIntegration()}catch(t){console.error("Cashfree initialization error:",t),await this.createFallbackIntegration()}}async createFallbackIntegration(){console.log("Creating fallback Cashfree integration..."),this.isInitialized=!0,this.cashfree={checkout:t=>(console.log("Fallback Cashfree checkout initialized with options:",t),this.createMockCheckout(t))},console.log("Fallback integration created successfully"),console.log("💡 Using demo payment system for testing"),console.log("💡 In production, ensure Cashfree SDK is properly loaded"),this.addTestModeIndicator()}addTestModeIndicator(){try{const t=document.getElementById("cashfree-test-mode-indicator");t&&t.remove();const n=document.createElement("div");n.id="cashfree-test-mode-indicator",n.innerHTML=`
        <div style="
          position: fixed;
          top: 70px;
          right: 10px;
          background: #f59e0b;
          color: white;
          padding: 8px 12px;
          border-radius: 20px;
          font-size: 12px;
          font-weight: 600;
          z-index: 9999;
          box-shadow: 0 2px 4px rgba(0,0,0,0.2);
          display: flex;
          align-items: center;
          gap: 6px;
        ">
          <span>🧪</span>
          <span>Demo Mode</span>
        </div>
      `,document.body.appendChild(n),setTimeout(()=>{n.parentNode&&(n.style.opacity="0.7")},5e3)}catch(t){console.error("Error adding test mode indicator:",t)}}createMockCheckout(t){return console.log("Mock Cashfree checkout initialized"),new Promise((n,s)=>{this.createDemoPaymentInterface(t,n,s)})}createDemoPaymentInterface(t,n,s){var o,d,c,u,m;const a=document.getElementById("cashfree-demo-interface");a&&a.remove();const i=document.createElement("div");i.id="cashfree-demo-interface",i.innerHTML=`
      <div style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10000;
        font-family: 'Inter', sans-serif;
      ">
        <div style="
          background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
          border: 1px solid rgba(255, 215, 0, 0.3);
          border-radius: 20px;
          padding: 2rem;
          max-width: 500px;
          width: 90%;
          text-align: center;
          color: white;
          box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
        ">
          <div style="font-size: 3rem; margin-bottom: 1rem;">🧪</div>
          <h2 style="
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
            font-size: 1.8rem;
            font-weight: 800;
          ">Demo Payment</h2>
          
          <div style="
            background: rgba(255, 215, 0, 0.1);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
          ">
            <p style="font-size: 1.2rem; font-weight: 600; margin-bottom: 0.5rem;">
              Amount: ₹${((o=this.currentOrder)==null?void 0:o.order_amount)||"Unknown"}
            </p>
            <p style="color: rgba(255, 255, 255, 0.7); font-size: 0.9rem; margin-bottom: 0.5rem;">
              Order ID: ${t.orderId||"Unknown"}
            </p>
            <p style="color: rgba(255, 255, 255, 0.7); font-size: 0.9rem;">
              Customer: ${((c=(d=this.currentOrder)==null?void 0:d.customer_details)==null?void 0:c.customer_email)||"Unknown"}
            </p>
          </div>
          
          <p style="color: rgba(255, 255, 255, 0.8); margin-bottom: 2rem; line-height: 1.6;">
            This is a demo payment simulation. In production, this would open the Cashfree payment gateway.
          </p>
          
          <div style="display: flex; gap: 1rem; justify-content: center;">
            <button id="demo-payment-success" style="
              background: linear-gradient(135deg, #000000 0%, #ffd700 100%);
              color: white;
              border: none;
              padding: 1rem 2rem;
              border-radius: 12px;
              font-weight: 600;
              cursor: pointer;
              font-size: 1rem;
              box-shadow: 0 8px 32px rgba(255, 215, 0, 0.3);
              transition: all 0.3s ease;
            " onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
              ✅ Simulate Success
            </button>
            <button id="demo-payment-failure" style="
              background: rgba(255, 255, 255, 0.1);
              color: #ffd700;
              border: 1px solid rgba(255, 215, 0, 0.3);
              padding: 1rem 2rem;
              border-radius: 12px;
              font-weight: 600;
              cursor: pointer;
              font-size: 1rem;
              transition: all 0.3s ease;
            " onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
              ❌ Simulate Failure
            </button>
          </div>
        </div>
      </div>
    `,document.body.appendChild(i),(u=document.getElementById("demo-payment-success"))==null||u.addEventListener("click",()=>{i.remove(),setTimeout(()=>{console.log("Demo payment completed successfully"),n({redirect:!1,success:!0,orderId:t.orderId,paymentStatus:"SUCCESS"})},1500)}),(m=document.getElementById("demo-payment-failure"))==null||m.addEventListener("click",()=>{i.remove(),s({error:{message:"Payment failed (simulated)"}})}),i.addEventListener("click",h=>{h.target===i&&(i.remove(),s({error:{message:"Payment cancelled by user"}}))})}async initiatePayment(t,n,s,a){var i;if(this.isProcessing){f.error("A payment is already in progress.");return}this.isProcessing=!0,f.loading("Initiating payment...",{id:"payment-toast"});try{if(console.log("Starting payment initiation...",{amount:t,customerEmail:n,customerName:s,customerId:a}),!this.isInitialized){console.log("Waiting for CashfreeManager to initialize...");let m=0;const h=30;for(;!this.isInitialized&&m<h;)await new Promise(g=>setTimeout(g,100)),m++;if(!this.isInitialized)throw new Error("CashfreeManager initialization timeout")}const d=await this.createOrderOnServer(t,a,n,"9999999999");this.currentOrder=d,console.log("Order created:",d),console.log("Using demo payment system...");const c={orderId:d.order_id,paymentSessionId:d.payment_session_id,redirectTarget:"_self"};console.log("Initiating demo checkout with options:",c);const u=await this.cashfree.checkout(c);console.log("Demo payment result:",u),u.error?(console.error("Demo payment error:",u.error),f.dismiss("payment-toast"),f.error("Payment failed: "+u.error.message),await this.handlePaymentFailure(d.order_id,"failed",u.error.message)):u.success?(console.log("Demo payment successful!"),f.dismiss("payment-toast"),f.success("Payment successful! Balance updated."),await this.handlePaymentSuccess(d.order_id,u.paymentId||"DEMO_PAYMENT",t,"INR",a,"completed","INR deposit via Cashfree (Demo)")):(console.log("Payment cancelled or incomplete"),f.dismiss("payment-toast"),f.error("Payment was cancelled"),await this.handlePaymentFailure(d.order_id,"cancelled","Payment cancelled by user"))}catch(o){console.error("Error during payment initiation:",o),f.dismiss("payment-toast"),f.error("Failed to initiate payment: "+o.message),await this.handlePaymentFailure(((i=this.currentOrder)==null?void 0:i.order_id)||"N/A","failed",o.message)}finally{this.isProcessing=!1}}async createOrderOnServer(t,n,s,a){return console.log("Creating order on server..."),new Promise(i=>{setTimeout(()=>{const o=`order_${Date.now()}`;console.log(`Simulated order created: ${o}`),i({order_id:o,payment_session_id:`session_${o}_${Math.random().toString(36).substring(7)}`,order_amount:t,customer_details:{customer_id:n,customer_email:s,customer_phone:a}})},1e3)})}hasSDK(){return!!this.cashfree&&this.isInitialized}async handlePaymentResponse(t,n,s,a,i){console.log(`Handling payment response for Order ID: ${t}, Status: ${s}`),s==="SUCCESS"?(await this.handlePaymentSuccess(t,n,a,"INR",i,"completed","INR deposit via Cashfree"),f.success("Payment successful and balance updated!")):(await this.handlePaymentFailure(t,s,"Payment failed or cancelled"),f.error("Payment failed or was cancelled."))}async handlePaymentSuccess(t,n,s,a,i,o,d){try{await se.createTransaction({userId:i,type:"deposit",amount:s,currency:a,description:d,status:o,orderId:t,paymentId:n,timestamp:new Date}),await se.updateUserBalance(i,a,s),console.log(`User ${i} ${a} balance updated by ${s}`),window.dispatchEvent(new Event("balanceUpdated"))}catch(c){console.error("Error handling payment success:",c),f.error("Failed to update balance or log transaction.")}}async handlePaymentFailure(t,n,s){var a,i;try{const o=((a=fe.currentUser)==null?void 0:a.uid)||"unknown";await se.createTransaction({userId:o,type:"deposit",amount:((i=this.currentOrder)==null?void 0:i.order_amount)||0,currency:"INR",description:`INR deposit failed: ${s}`,status:n,orderId:t,timestamp:new Date}),console.log(`Payment failed for order ${t}: ${s}`)}catch(o){console.error("Error logging failed transaction:",o)}}isReady(){return this.isInitialized&&this.cashfree!==null}}const he=new ss,as=()=>{const[r,t]=l.useState(""),[n,s]=l.useState([]),[a,i]=l.useState([]),[o,d]=l.useState(!1),[c,u]=l.useState(!0),[m,h]=l.useState({btc:"BTC deposits not supported on Sepolia",usdt:"",bxc:""}),{currentUser:g,userProfile:y}=H(),{refreshAllBalances:k}=pe(),x=Q();l.useEffect(()=>{var N;const A=(N=L==null?void 0:L.contracts)==null?void 0:N.cryptoWallet;h({btc:"BTC deposits not supported on Sepolia",usdt:A,bxc:A})},[]);const b=async(A,N)=>{try{await navigator.clipboard.writeText(A),f.success(`${N} address copied to clipboard!`)}catch{const T=document.createElement("textarea");T.value=A,document.body.appendChild(T),T.select(),document.execCommand("copy"),document.body.removeChild(T),f.success(`${N} address copied to clipboard!`)}},j=async()=>{try{f.loading("Refreshing balances...",{id:"refresh-balances"}),await k(),await B(),await v(),f.dismiss("refresh-balances"),f.success("Balances refreshed!")}catch(A){console.error("Error refreshing balances:",A),f.dismiss("refresh-balances"),f.error("Failed to refresh balances")}},B=l.useCallback(async()=>{if(g)try{u(!0);const A=await q.getUserTransactions(g.uid,"deposit",5),N=A.filter(T=>T.currency==="INR"),C=A.filter(T=>T.currency!=="INR");s(N),i(C)}catch(A){console.error("Error loading recent deposits:",A),f.error("Error loading recent deposits")}finally{u(!1)}},[g]),v=l.useCallback(async()=>{},[]);l.useEffect(()=>{if(!g){x("/");return}B(),v();const A=()=>{B(),v()};return window.addEventListener("balanceUpdated",A),()=>{window.removeEventListener("balanceUpdated",A)}},[g,x,B,v]);const P=async()=>{const A=parseFloat(r);if(!A||A<100){f.error("Please enter a valid amount (minimum ₹100)");return}if(!g||!y){f.error("Please log in to make a deposit");return}try{d(!0),console.log("Starting INR deposit process...",{amount:A,user:g.uid});let N=0;const C=50;for(;!he.isInitialized&&N<C;)console.log(`Waiting for Cashfree manager initialization... Attempt ${N+1}/${C}`),await new Promise(T=>setTimeout(T,200)),N++;if(console.log("Cashfree manager initialized:",he.isInitialized),he.isInitialized)console.log("Calling Cashfree initiatePayment..."),await he.initiatePayment(A,g.email||"",g.displayName||y.email.split("@")[0]||"User",g.uid),t(""),await B();else throw new Error("Payment service initialization failed. Please refresh the page and try again.")}catch(N){console.error("Deposit error:",N),f.error("Error processing deposit: "+N.message)}finally{d(!1)}},F=(A,N=!1)=>c?e.jsx("p",{children:"Loading transactions..."}):A.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#666"},children:[e.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"📥"}),e.jsx("h3",{children:"No deposits yet"}),e.jsx("p",{children:"Your deposit history will appear here once you make your first deposit."})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:A.map(C=>{var D,U;const T=S=>{switch(S){case"INR":return"₹";case"BTC":return"₿";case"USDT":return"💵";case"BXC":return"🪙";default:return"💰"}},z=(S,w)=>w==="INR"?`₹${S.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`:w==="BTC"?`${S.toFixed(8)} BTC`:w==="USDT"?`${S.toFixed(2)} USDT`:w==="BXC"?`${S.toFixed(2)} BXC`:`${S} ${w}`,$=S=>{const w=S instanceof Date?S:new Date(S),W=(new Date().getTime()-w.getTime())/(1e3*60*60);if(W<1)return"Just now";if(W<24){const R=Math.floor(W);return`${R} hour${R>1?"s":""} ago`}else return W<48?"Yesterday, "+w.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):w.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},I=(U=(D=L==null?void 0:L.networks)==null?void 0:D.sepolia)==null?void 0:U.explorer,E=C.txHash&&N?e.jsx("a",{href:`${I}/tx/${C.txHash}`,target:"_blank",rel:"noopener noreferrer",style:{color:"#007bff",textDecoration:"none",fontSize:"0.8rem"},children:"View on Explorer"}):null;return e.jsxs("div",{style:{padding:"1rem",border:"1px solid #eee",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:C.currency==="INR"?"#10b981":C.currency==="BTC"?"#f7931a":C.currency==="USDT"?"#26a17b":"#6366f1",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"1.2rem"},children:T(C.currency)}),e.jsxs("div",{children:[e.jsxs("p",{style:{fontWeight:"600",margin:0},children:[C.currency," Deposit"]}),e.jsx("p",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#374151",margin:0},children:z(C.amount,C.currency)}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"#999",margin:0},children:[$(C.timestamp),E&&e.jsxs("span",{children:[" • ",E]})]})]})]}),e.jsx("div",{style:{padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:"500",background:C.status==="completed"?"#d1fae5":C.status==="pending"?"#fef3c7":"#fee2e2",color:C.status==="completed"?"#065f46":C.status==="pending"?"#92400e":"#991b1b"},children:C.status})]},C.id)})});return y?e.jsx("div",{className:"animate-fadeInUp",style:{padding:"2rem 0"},children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"animate-fadeInUp",style:{marginBottom:"2rem",textAlign:"center"},children:[e.jsx("h1",{style:{fontSize:"3rem",fontWeight:"800",marginBottom:"1rem",background:"linear-gradient(135deg, #ffd700 0%, #ffed4e 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"💰 Deposit Funds"}),e.jsx("p",{style:{color:"rgba(255, 255, 255, 0.8)",fontSize:"1.2rem",fontWeight:"500"},children:"Add INR or cryptocurrency to your wallet"})]}),e.jsxs("div",{className:"animate-fadeInUp",style:{marginBottom:"2rem"},children:[e.jsx("h3",{style:{marginBottom:"1.5rem",fontSize:"1.5rem",fontWeight:"700",color:"rgba(255, 255, 255, 0.9)",textAlign:"center"},children:"💎 Available Balances"}),e.jsxs("div",{className:"grid grid-cols-4",style:{gap:"1.5rem"},children:[e.jsxs("div",{className:"card hover-lift text-center",style:{background:"linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, rgba(255, 215, 0, 0.05) 100%)",border:"1px solid rgba(255, 215, 0, 0.3)",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"₹"}),e.jsx("span",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.9rem",fontWeight:"600"},children:"INR"}),e.jsxs("span",{style:{display:"block",fontSize:"1.8rem",fontWeight:"800",margin:"0.5rem 0",color:"#ffd700"},children:["₹",y.inrBalance.toFixed(2)]})]}),e.jsxs("div",{className:"card hover-lift text-center",style:{background:"linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, rgba(255, 215, 0, 0.05) 100%)",border:"1px solid rgba(255, 215, 0, 0.3)",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"₿"}),e.jsx("span",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.9rem",fontWeight:"600"},children:"BTC"}),e.jsx("span",{style:{display:"block",fontSize:"1.8rem",fontWeight:"800",margin:"0.5rem 0",color:"#ffd700"},children:y.cryptoBalances.BTC.toFixed(8)})]}),e.jsxs("div",{className:"card hover-lift text-center",style:{background:"linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, rgba(255, 215, 0, 0.05) 100%)",border:"1px solid rgba(255, 215, 0, 0.3)",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"💵"}),e.jsx("span",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.9rem",fontWeight:"600"},children:"USDT"}),e.jsx("span",{style:{display:"block",fontSize:"1.8rem",fontWeight:"800",margin:"0.5rem 0",color:"#ffd700"},children:y.cryptoBalances.USDT.toFixed(2)})]}),e.jsxs("div",{className:"card hover-lift text-center",style:{background:"linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, rgba(255, 215, 0, 0.05) 100%)",border:"1px solid rgba(255, 215, 0, 0.3)",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"🪙"}),e.jsx("span",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.9rem",fontWeight:"600"},children:"BXC"}),e.jsx("span",{style:{display:"block",fontSize:"1.8rem",fontWeight:"800",margin:"0.5rem 0",color:"#ffd700"},children:y.cryptoBalances.BXC.toFixed(2)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2",style:{gap:"2rem"},children:[e.jsxs("div",{className:"animate-fadeInLeft",children:[e.jsx("div",{style:{display:"flex",alignItems:"center",marginBottom:"1.5rem"},children:e.jsx("h2",{style:{fontSize:"1.8rem",fontWeight:"800",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"💰 Deposit INR"})}),e.jsxs("div",{className:"card hover-lift",style:{background:"linear-gradient(135deg, rgba(16, 185, 129, 0.05) 0%, rgba(5, 150, 105, 0.05) 100%)",border:"1px solid rgba(16, 185, 129, 0.2)"},children:[!he.isReady()&&e.jsx("div",{style:{background:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:e.jsxs("span",{style:{color:"#92400e",fontSize:"0.9rem"},children:[e.jsx("strong",{children:"Demo Mode:"})," Cashfree SDK not loaded. Payments will be simulated for testing purposes."]})}),e.jsx("p",{style:{color:"#666",marginBottom:"1rem"},children:"Add INR to your wallet using Cashfree payment gateway"}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Amount (INR)"}),e.jsx("input",{type:"number",placeholder:"Enter amount (min ₹100)",min:"100",step:"100",value:r,onChange:A=>t(A.target.value),required:!0,style:{width:"100%"}})]}),e.jsx("button",{onClick:P,disabled:o,className:"hover-lift",style:{width:"100%",padding:"0.75rem",background:"linear-gradient(135deg, #000000 0%, #ffd700 100%)",color:"white",border:"none",borderRadius:"12px",fontWeight:"600",cursor:o?"not-allowed":"pointer",opacity:o?.6:1,boxShadow:"0 8px 32px rgba(255, 215, 0, 0.3)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:o?"Processing...":"💰 Deposit INR via Cashfree"})]})]}),e.jsxs("div",{className:"animate-fadeInRight",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.8rem",fontWeight:"800",background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"🪙 Deposit Cryptocurrency"}),e.jsx("button",{onClick:j,disabled:o,className:"hover-lift",style:{padding:"0.75rem 1.25rem",background:"linear-gradient(135deg, #000000 0%, #ffd700 100%)",color:"white",border:"none",borderRadius:"16px",cursor:o?"not-allowed":"pointer",opacity:o?.6:1,fontSize:"0.9rem",fontWeight:"600",boxShadow:"0 8px 32px rgba(255, 215, 0, 0.3)"},children:"🔄 Refresh Balances"})]}),e.jsxs("div",{className:"card hover-lift",style:{marginBottom:"1rem",background:"linear-gradient(135deg, rgba(247, 147, 26, 0.05) 0%, rgba(245, 101, 101, 0.05) 100%)",border:"1px solid rgba(247, 147, 26, 0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("span",{style:{fontSize:"2rem",marginRight:"0.75rem"},children:"₿"}),e.jsx("h3",{style:{margin:0,fontSize:"1.3rem",fontWeight:"700",color:"#f7931a"},children:"Bitcoin (BTC)"})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Deposit Address:"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("input",{type:"text",value:m.btc,readOnly:!0,style:{flex:1,background:"black"}}),e.jsx("button",{onClick:()=>b(m.btc,"BTC"),disabled:m.btc.includes("not supported"),style:{padding:"0.5rem",background:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:m.btc.includes("not supported")?"not-allowed":"pointer",opacity:m.btc.includes("not supported")?.5:1},children:"📋"})]}),e.jsx("small",{style:{color:"#666"},children:"Send BTC to this address. Minimum: 0.0001 BTC"})]})]}),e.jsxs("div",{className:"card hover-lift",style:{marginBottom:"1rem",background:"linear-gradient(135deg, rgba(38, 161, 123, 0.05) 0%, rgba(34, 197, 94, 0.05) 100%)",border:"1px solid rgba(38, 161, 123, 0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("span",{style:{fontSize:"2rem",marginRight:"0.75rem"},children:"💵"}),e.jsx("h3",{style:{margin:0,fontSize:"1.3rem",fontWeight:"700",color:"#26a17b"},children:"USDT (Sepolia)"})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Deposit Address:"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("input",{type:"text",value:m.usdt,readOnly:!0,placeholder:"Loading USDT deposit address...",style:{flex:1,background:"black"}}),e.jsx("button",{onClick:()=>b(m.usdt,"USDT"),disabled:!m.usdt,style:{padding:"0.5rem",background:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:m.usdt?"pointer":"not-allowed",opacity:m.usdt?1:.5},children:"📋"})]}),e.jsx("small",{style:{color:"#666"},children:"Send USDT to this address. Minimum: 1 USDT"})]})]}),e.jsxs("div",{className:"card hover-lift",style:{marginBottom:"1rem",background:"linear-gradient(135deg, rgba(99, 102, 241, 0.05) 0%, rgba(139, 92, 246, 0.05) 100%)",border:"1px solid rgba(99, 102, 241, 0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("span",{style:{fontSize:"2rem",marginRight:"0.75rem"},children:"🪙"}),e.jsx("h3",{style:{margin:0,fontSize:"1.3rem",fontWeight:"700",color:"#6366f1"},children:"BXC Token"})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Deposit Address:"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("input",{type:"text",value:m.bxc,readOnly:!0,placeholder:"Loading BXC deposit address...",style:{flex:1,background:"black"}}),e.jsx("button",{onClick:()=>b(m.bxc,"BXC"),disabled:!m.bxc,style:{padding:"0.5rem",background:"#6366f1",color:"white",border:"none",borderRadius:"4px",cursor:m.bxc?"pointer":"not-allowed",opacity:m.bxc?1:.5},children:"📋"})]}),e.jsx("small",{style:{color:"#666"},children:"Send BXC to this address. Minimum: 10 BXC"})]})]})]})]}),e.jsxs("div",{className:"animate-fadeInUp",style:{marginTop:"3rem"},children:[e.jsx("h2",{style:{fontSize:"2rem",fontWeight:"800",marginBottom:"2rem",textAlign:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"📊 Recent Deposits"}),e.jsxs("div",{className:"grid grid-cols-2",style:{gap:"2rem"},children:[e.jsxs("div",{className:"animate-fadeInLeft",children:[e.jsx("h3",{style:{fontSize:"1.4rem",fontWeight:"700",marginBottom:"1.5rem",color:"rgba(255, 255, 255, 0.9)",textAlign:"center"},children:"💰 INR Deposits"}),e.jsx("div",{className:"card hover-lift",style:{background:"linear-gradient(135deg, rgba(16, 185, 129, 0.05) 0%, rgba(5, 150, 105, 0.05) 100%)",border:"1px solid rgba(16, 185, 129, 0.2)"},children:F(n,!1)})]}),e.jsxs("div",{className:"animate-fadeInRight",children:[e.jsx("h3",{style:{fontSize:"1.4rem",fontWeight:"700",marginBottom:"1.5rem",color:"rgba(255, 255, 255, 0.9)",textAlign:"center"},children:"🪙 Crypto Deposits"}),e.jsx("div",{className:"card hover-lift",style:{background:"linear-gradient(135deg, rgba(99, 102, 241, 0.05) 0%, rgba(139, 92, 246, 0.05) 100%)",border:"1px solid rgba(99, 102, 241, 0.2)"},children:F(a,!0)})]})]})]})]})}):e.jsx("div",{style:{padding:"4rem 0",textAlign:"center"},children:e.jsx("p",{children:"Loading profile..."})})},is=()=>{const[r,t]=l.useState({crypto:"BTC",amount:"",bankAccount:"",ifscCode:""}),[n,s]=l.useState({crypto:"BTC",inrAmount:"",walletAddress:""}),[a,i]=l.useState([]),[o,d]=l.useState(!1),[c,u]=l.useState(!0),[m,h]=l.useState(null),{currentUser:g,userProfile:y,updateUserProfile:k,refreshUserProfile:x}=H(),{account:b,isConnected:j,connectWallet:B,web3:v,getNetworkStatus:P}=pe(),{prices:F,convertFromINR:A,refreshPrices:N}=Ee(),C=Q(),T=l.useCallback(async()=>{if(g)try{u(!0);const w=await q.getUserTransactions(g.uid,"withdrawal",5);i(w)}catch(w){console.error("Error loading recent withdrawals:",w),f.error("Error loading recent withdrawals")}finally{u(!1)}},[g]),z=l.useCallback(async()=>{if(!v||!j){h("Not connected");return}try{const w=L.contracts.bxc,p=L.contracts.cryptoWallet,W=[{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],type:"function"}],R=new v.eth.Contract(W,w),O=new Promise((Re,Pt)=>setTimeout(()=>Pt(new Error("Contract call timeout")),8e3)),X=R.methods.balanceOf(p).call(),Ve=await Promise.race([X,O]),be=parseFloat(v.utils.fromWei(Ve,"ether")).toFixed(8);h(be)}catch(w){console.warn("Contract balance check failed, using demo mode:",w.message),h("1000.00 (Demo)")}},[v,j]);l.useEffect(()=>{if(!g){C("/");return}(async()=>{await T(),await N(),await z()})();const p=()=>{x(),T(),z()};return window.addEventListener("balanceUpdated",p),()=>{window.removeEventListener("balanceUpdated",p)}},[g,C,T,z]);const $=async()=>{const w=parseFloat(r.amount),p=r.crypto;if(!p||!w||w<=0){f.error("Please fill in all fields with valid amounts");return}if(!r.bankAccount||!r.ifscCode){f.error("Please fill in bank account details");return}if(!y){f.error("User profile not loaded");return}if(w>y.cryptoBalances[p]){f.error(`Insufficient ${p} balance`);return}try{d(!0),f.loading("Processing INR withdrawal...",{id:"inr-withdraw-toast"});const W=y.cryptoBalances[p]-w;await k({cryptoBalances:{...y.cryptoBalances,[p]:W}}),await q.logTransaction({userId:g.uid,type:"withdrawal",amount:w,currency:p,description:`Converted ${p} to INR and withdrew to bank account ${r.bankAccount}`,status:"completed"}),f.dismiss("inr-withdraw-toast"),f.success("INR withdrawal request submitted successfully!"),t({crypto:"BTC",amount:"",bankAccount:"",ifscCode:""}),x(),T()}catch(W){console.error("INR Withdrawal error:",W),f.dismiss("inr-withdraw-toast"),f.error("Error processing INR withdrawal: "+W.message)}finally{d(!1)}},I=async()=>{const w=parseFloat(n.inrAmount),p=n.crypto,W=n.walletAddress;if(!p||!w||w<100){f.error("Please enter a valid INR amount (minimum ₹100)");return}if(!W){f.error("Please enter a valid wallet address");return}if(!E(W)){f.error("Invalid wallet address format. Please enter a valid Ethereum address (0x...)");return}if(!y){f.error("User profile not loaded");return}if(w>y.inrBalance){f.error("Insufficient INR balance");return}if(!j||!v){f.error("Please connect your MetaMask wallet to withdraw cryptocurrency.");return}try{d(!0),f.loading("Processing crypto withdrawal...",{id:"crypto-withdraw-toast"});const R=A(w,p);if(isNaN(R)||R<=0)throw new Error("Invalid crypto amount calculated.");if(p==="BXC"&&m!==null&&parseFloat(m)<R){f.dismiss("crypto-withdraw-toast"),f.error(`Insufficient BXC balance in smart contract. Contract has ${m} BXC, but ${R.toFixed(8)} BXC is required. Please load more BXC tokens into the contract.`),d(!1);return}const O=y.inrBalance-w;await k({inrBalance:O}),await ct(we(ee,"pending_withdrawals"),{userId:g.uid,userAddress:W,crypto:p,cryptoAmount:R,inrAmount:w,tokenAddress:L.contracts[p.toLowerCase()],status:"pending_admin_execution",createdAt:new Date,type:"inr_to_crypto"}),await q.logTransaction({userId:g.uid,type:"withdrawal",amount:R,currency:p,description:`INR to ${p} withdrawal to external wallet ${W}`,status:"pending"}),f.dismiss("crypto-withdraw-toast"),f.success(`INR to ${p} withdrawal request submitted. Admin will process the crypto transfer shortly.`),s({crypto:"BTC",inrAmount:"",walletAddress:""}),x(),T(),z()}catch(R){console.error("Crypto Withdrawal error:",R),f.dismiss("crypto-withdraw-toast"),f.error("Error processing crypto withdrawal: "+R.message)}finally{d(!1)}},E=w=>/^0x[a-fA-F0-9]{40}$/.test(w),D=()=>{const w=parseFloat(r.amount)||0,p=r.crypto,W=F[p];return w>0&&typeof W=="number"?`≈ ₹${(w*W).toFixed(2)}`:"Select crypto and enter amount"},U=()=>{const w=parseFloat(n.inrAmount)||0,p=n.crypto;return w>0&&F[p]?`≈ ${A(w,p).toFixed(8)} ${p}`:"Select crypto and enter INR amount"},S=w=>c?e.jsx("p",{children:"Loading transactions..."}):w.length===0?e.jsx("p",{style:{color:"#666",textAlign:"center",padding:"2rem"},children:"No recent withdrawals found."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:w.map(p=>e.jsxs("div",{style:{padding:"1rem",border:"1px solid #eee",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("p",{style:{fontWeight:"600",margin:0},children:[p.amount," ",p.currency]}),e.jsx("p",{style:{fontSize:"0.9rem",color:"#666",margin:0},children:p.description}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"#999",margin:0},children:[new Date(p.timestamp).toLocaleDateString()," ",new Date(p.timestamp).toLocaleTimeString()]})]}),e.jsx("div",{style:{padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.8rem",fontWeight:"500",background:p.status==="completed"?"#d4edda":p.status==="pending"?"#fff3cd":"#f8d7da",color:p.status==="completed"?"#155724":p.status==="pending"?"#856404":"#721c24"},children:p.status})]},p.id))});return y?e.jsx("div",{style:{padding:"2rem 0"},children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Withdraw Funds"}),e.jsx("p",{style:{color:"#666",fontSize:"1.1rem"},children:"Withdraw INR or cryptocurrency from your wallet"})]}),e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h3",{style:{marginBottom:"1rem"},children:"Available Balances"}),e.jsxs("div",{className:"grid grid-cols-4",style:{gap:"1rem"},children:[e.jsxs("div",{className:"card text-center",children:[e.jsx("span",{style:{color:"#666",fontSize:"0.9rem"},children:"INR"}),e.jsxs("span",{style:{display:"block",fontSize:"1.5rem",fontWeight:"bold",margin:"0.5rem 0"},children:["₹",y.inrBalance.toFixed(2)]})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("span",{style:{color:"#666",fontSize:"0.9rem"},children:"BTC"}),e.jsx("span",{style:{display:"block",fontSize:"1.5rem",fontWeight:"bold",margin:"0.5rem 0"},children:y.cryptoBalances.BTC.toFixed(8)})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("span",{style:{color:"#666",fontSize:"0.9rem"},children:"USDT"}),e.jsx("span",{style:{display:"block",fontSize:"1.5rem",fontWeight:"bold",margin:"0.5rem 0"},children:y.cryptoBalances.USDT.toFixed(2)})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("span",{style:{color:"#666",fontSize:"0.9rem"},children:"BXC"}),e.jsx("span",{style:{display:"block",fontSize:"1.5rem",fontWeight:"bold",margin:"0.5rem 0"},children:y.cryptoBalances.BXC.toFixed(2)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2",style:{gap:"2rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{display:"flex",alignItems:"center",marginBottom:"1rem"},children:e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:"💰 Withdraw INR"})}),e.jsxs("div",{className:"card",children:[e.jsx("p",{style:{color:"#666",marginBottom:"1rem"},children:"Convert crypto to INR and withdraw to your bank account"}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Select Cryptocurrency"}),e.jsxs("select",{value:r.crypto,onChange:w=>t(p=>({...p,crypto:w.target.value})),required:!0,style:{width:"100%"},children:[e.jsx("option",{value:"BTC",children:"Bitcoin (BTC)"}),e.jsx("option",{value:"USDT",children:"USDT (BEP-20)"}),e.jsx("option",{value:"BXC",children:"BXC Token"})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Amount"}),e.jsx("input",{type:"number",placeholder:"Enter amount",min:"0",step:"0.00000001",value:r.amount,onChange:w=>t(p=>({...p,amount:w.target.value})),required:!0,style:{width:"100%"}}),e.jsx("small",{style:{color:"#666"},children:D()})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Bank Account Number"}),e.jsx("input",{type:"text",placeholder:"Enter bank account number",value:r.bankAccount,onChange:w=>t(p=>({...p,bankAccount:w.target.value})),required:!0,style:{width:"100%"}})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"IFSC Code"}),e.jsx("input",{type:"text",placeholder:"Enter IFSC code",value:r.ifscCode,onChange:w=>t(p=>({...p,ifscCode:w.target.value})),required:!0,style:{width:"100%"}})]}),e.jsx("button",{onClick:$,disabled:o,style:{width:"100%",padding:"0.75rem",background:"#007bff",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:o?"not-allowed":"pointer",opacity:o?.6:1},children:o?"Processing...":"Withdraw INR"})]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{display:"flex",alignItems:"center",marginBottom:"1rem"},children:e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:"🪙 Withdraw Cryptocurrency"})}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("span",{style:{padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.9rem",fontWeight:"500",background:j?"#d4edda":"#f8d7da",color:j?"#155724":"#721c24",border:`1px solid ${j?"#c3e6cb":"#f5c6cb"}`},children:j&&b?`Connected: ${b.slice(0,6)}...${b.slice(-4)}`:"Not Connected"}),e.jsx("span",{style:{marginLeft:"1rem",color:"#666"},children:P()}),!j&&e.jsx("button",{onClick:B,style:{marginLeft:"1rem",background:"#007bff",color:"white",border:"none"},children:"Connect Wallet"})]}),e.jsx("p",{style:{color:"#666",marginBottom:"1rem"},children:"Convert INR to crypto and withdraw to external wallet"}),m!==null&&e.jsxs("div",{style:{background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:e.jsx("strong",{style:{color:"#0c4a6e"},children:"Smart Contract Balance Required"})}),e.jsx("p",{style:{margin:0,color:"#0c4a6e",fontSize:"0.9rem"},children:m==="Error"?e.jsx("span",{style:{color:"#dc2626"},children:"⚠️ Error checking contract balance!"}):parseFloat(m)>0?e.jsxs("span",{children:["Contract has ",e.jsxs("strong",{children:[m," BXC tokens"]})," available."]}):e.jsx("span",{style:{color:"#dc2626"},children:"⚠️ No BXC tokens in contract!"})})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Select Cryptocurrency"}),e.jsxs("select",{value:n.crypto,onChange:w=>s(p=>({...p,crypto:w.target.value})),required:!0,style:{width:"100%"},children:[e.jsx("option",{value:"BTC",children:"Bitcoin (BTC)"}),e.jsx("option",{value:"USDT",children:"USDT (BEP-20)"}),e.jsx("option",{value:"BXC",children:"BXC Token"})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"INR Amount"}),e.jsx("input",{type:"number",placeholder:"Enter INR amount",min:"100",step:"100",value:n.inrAmount,onChange:w=>s(p=>({...p,inrAmount:w.target.value})),required:!0,style:{width:"100%"}}),e.jsx("small",{style:{color:"#666"},children:U()})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Wallet Address"}),e.jsx("input",{type:"text",placeholder:"Enter wallet address",value:n.walletAddress,onChange:w=>s(p=>({...p,walletAddress:w.target.value})),required:!0,style:{width:"100%"}}),e.jsx("small",{style:{color:"#666"},children:"Make sure the address is correct for the selected cryptocurrency"})]}),e.jsx("button",{onClick:I,disabled:o||!j,style:{width:"100%",padding:"0.75rem",background:"#007bff",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:o||!j?"not-allowed":"pointer",opacity:o||!j?.6:1},children:o?"Processing...":"Withdraw Crypto"})]})]})]}),e.jsxs("div",{style:{marginTop:"3rem"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",marginBottom:"1rem"},children:e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:"📊 Recent Withdrawals"})}),e.jsx("div",{className:"card",children:S(a)})]})]})}):e.jsx("div",{style:{padding:"4rem 0",textAlign:"center"},children:e.jsx("p",{children:"Loading profile..."})})},os=()=>{const[r,t]=l.useState("inr"),[n,s]=l.useState({amount:"",recipientEmail:"",description:""}),[a,i]=l.useState({crypto:"BTC",amount:"",recipientEmail:"",description:""}),[o,d]=l.useState([]),[c,u]=l.useState(!1),[m,h]=l.useState(!0),{currentUser:g,userProfile:y,updateUserProfile:k,refreshUserProfile:x}=H(),{prices:b,convertToINR:j}=Ee(),B=Q(),v=l.useCallback(async()=>{if(g)try{h(!0);const C=await q.getUserTransactions(g.uid,"transfer",10);d(C)}catch(C){console.error("Error loading recent transfers:",C),f.error("Error loading recent transfers")}finally{h(!1)}},[g]);l.useEffect(()=>{if(!g){B("/");return}v();const C=()=>{x(),v()};return window.addEventListener("balanceUpdated",C),()=>{window.removeEventListener("balanceUpdated",C)}},[g,B,v,x]);const P=async C=>{try{return await Y.findUserByEmail(C)}catch(T){return console.error("Error finding user:",T),null}},F=async()=>{var $;const C=parseFloat(n.amount),T=n.recipientEmail.trim().toLowerCase(),z=n.description.trim();if(!C||C<=0){f.error("Please enter a valid amount");return}if(!T){f.error("Please enter recipient email");return}if(T===(($=g==null?void 0:g.email)==null?void 0:$.toLowerCase())){f.error("Cannot send money to yourself");return}if(!y){f.error("User profile not loaded");return}if(C>y.inrBalance){f.error("Insufficient INR balance");return}try{u(!0),f.loading("Processing INR transfer...",{id:"inr-send-toast"});const I=await P(T);if(!I){f.dismiss("inr-send-toast"),f.error("Recipient not found. Please check the email address.");return}const E=y.inrBalance-C;await k({inrBalance:E}),I.uid&&await Y.updateUserBalance(I.uid,"INR",C),await q.logTransaction({userId:g.uid,type:"transfer",amount:-C,currency:"INR",description:`Sent ₹${C} to ${T}${z?": "+z:""}`,status:"completed"}),await q.logTransaction({userId:I.uid,type:"transfer",amount:C,currency:"INR",description:`Received ₹${C} from ${g.email}${z?": "+z:""}`,status:"completed"}),f.dismiss("inr-send-toast"),f.success(`Successfully sent ₹${C} to ${T}`),s({amount:"",recipientEmail:"",description:""}),x(),v()}catch(I){console.error("INR Send error:",I),f.dismiss("inr-send-toast"),f.error("Error processing INR transfer: "+I.message)}finally{u(!1)}},A=async()=>{var I;const C=parseFloat(a.amount),T=a.crypto,z=a.recipientEmail.trim().toLowerCase(),$=a.description.trim();if(!C||C<=0){f.error("Please enter a valid amount");return}if(!z){f.error("Please enter recipient email");return}if(z===((I=g==null?void 0:g.email)==null?void 0:I.toLowerCase())){f.error("Cannot send money to yourself");return}if(!y){f.error("User profile not loaded");return}if(C>y.cryptoBalances[T]){f.error(`Insufficient ${T} balance`);return}try{u(!0),f.loading("Processing crypto transfer...",{id:"crypto-send-toast"});const E=await P(z);if(!E){f.dismiss("crypto-send-toast"),f.error("Recipient not found. Please check the email address.");return}const D=y.cryptoBalances[T]-C;await k({cryptoBalances:{...y.cryptoBalances,[T]:D}}),E.uid&&await Y.updateUserBalance(E.uid,T,C),await q.logTransaction({userId:g.uid,type:"transfer",amount:-C,currency:T,description:`Sent ${C} ${T} to ${z}${$?": "+$:""}`,status:"completed"}),await q.logTransaction({userId:E.uid,type:"transfer",amount:C,currency:T,description:`Received ${C} ${T} from ${g.email}${$?": "+$:""}`,status:"completed"}),f.dismiss("crypto-send-toast"),f.success(`Successfully sent ${C} ${T} to ${z}`),i({crypto:"BTC",amount:"",recipientEmail:"",description:""}),x(),v()}catch(E){console.error("Crypto Send error:",E),f.dismiss("crypto-send-toast"),f.error("Error processing crypto transfer: "+E.message)}finally{u(!1)}},N=C=>m?e.jsx("p",{children:"Loading transactions..."}):C.length===0?e.jsx("p",{style:{color:"#666",textAlign:"center",padding:"2rem"},children:"No recent transfers found."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:C.map(T=>e.jsxs("div",{style:{padding:"1rem",border:"1px solid #eee",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("p",{style:{fontWeight:"600",margin:0,color:T.amount<0?"#dc3545":"#28a745"},children:[T.amount>0?"+":"",T.amount," ",T.currency]}),e.jsx("p",{style:{fontSize:"0.9rem",color:"#666",margin:0},children:T.description}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"#999",margin:0},children:[new Date(T.timestamp).toLocaleDateString()," ",new Date(T.timestamp).toLocaleTimeString()]})]}),e.jsx("div",{style:{padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.8rem",fontWeight:"500",background:T.status==="completed"?"#d4edda":T.status==="pending"?"#fff3cd":"#f8d7da",color:T.status==="completed"?"#155724":T.status==="pending"?"#856404":"#721c24"},children:T.status})]},T.id))});return y?e.jsx("div",{style:{padding:"2rem 0"},children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Send Money"}),e.jsx("p",{style:{color:"#666",fontSize:"1.1rem"},children:"Transfer INR or cryptocurrency to other users"})]}),e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h3",{style:{marginBottom:"1rem"},children:"Available Balances"}),e.jsxs("div",{className:"grid grid-cols-4",style:{gap:"1rem"},children:[e.jsxs("div",{className:"card text-center",children:[e.jsx("span",{style:{color:"#666",fontSize:"0.9rem"},children:"INR"}),e.jsxs("span",{style:{display:"block",fontSize:"1.5rem",fontWeight:"bold",margin:"0.5rem 0"},children:["₹",y.inrBalance.toFixed(2)]})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("span",{style:{color:"#666",fontSize:"0.9rem"},children:"BTC"}),e.jsx("span",{style:{display:"block",fontSize:"1.5rem",fontWeight:"bold",margin:"0.5rem 0"},children:y.cryptoBalances.BTC.toFixed(8)})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("span",{style:{color:"#666",fontSize:"0.9rem"},children:"USDT"}),e.jsx("span",{style:{display:"block",fontSize:"1.5rem",fontWeight:"bold",margin:"0.5rem 0"},children:y.cryptoBalances.USDT.toFixed(2)})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("span",{style:{color:"#666",fontSize:"0.9rem"},children:"BXC"}),e.jsx("span",{style:{display:"block",fontSize:"1.5rem",fontWeight:"bold",margin:"0.5rem 0"},children:y.cryptoBalances.BXC.toFixed(2)})]})]})]}),e.jsxs("div",{style:{marginBottom:"2rem",display:"flex",gap:"1rem"},children:[e.jsx("button",{onClick:()=>t("inr"),style:{padding:"0.75rem 1.5rem",background:r==="inr"?"#007bff":"#f8f9fa",color:r==="inr"?"white":"#666",border:"1px solid #dee2e6",borderRadius:"8px",fontWeight:"600",cursor:"pointer"},children:"💰 Send INR"}),e.jsx("button",{onClick:()=>t("crypto"),style:{padding:"0.75rem 1.5rem",background:r==="crypto"?"#007bff":"#f8f9fa",color:r==="crypto"?"white":"#666",border:"1px solid #dee2e6",borderRadius:"8px",fontWeight:"600",cursor:"pointer"},children:"🪙 Send Crypto"})]}),e.jsxs("div",{className:"grid grid-cols-2",style:{gap:"2rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem"},children:r==="inr"?"Send INR":"Send Cryptocurrency"}),e.jsx("div",{className:"card",children:r==="inr"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Amount (INR)"}),e.jsx("input",{type:"number",placeholder:"Enter INR amount",min:"1",step:"1",value:n.amount,onChange:C=>s(T=>({...T,amount:C.target.value})),required:!0,style:{width:"100%"}})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Recipient Email"}),e.jsx("input",{type:"email",placeholder:"Enter recipient's email",value:n.recipientEmail,onChange:C=>s(T=>({...T,recipientEmail:C.target.value})),required:!0,style:{width:"100%"}})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Description (Optional)"}),e.jsx("input",{type:"text",placeholder:"Enter description",value:n.description,onChange:C=>s(T=>({...T,description:C.target.value})),style:{width:"100%"}})]}),e.jsx("button",{onClick:F,disabled:c,style:{width:"100%",padding:"0.75rem",background:"#28a745",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:c?"not-allowed":"pointer",opacity:c?.6:1},children:c?"Processing...":"Send INR"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Select Cryptocurrency"}),e.jsxs("select",{value:a.crypto,onChange:C=>i(T=>({...T,crypto:C.target.value})),required:!0,style:{width:"100%"},children:[e.jsx("option",{value:"BTC",children:"Bitcoin (BTC)"}),e.jsx("option",{value:"USDT",children:"USDT (BEP-20)"}),e.jsx("option",{value:"BXC",children:"BXC Token"})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Amount"}),e.jsx("input",{type:"number",placeholder:"Enter amount",min:"0",step:"0.00000001",value:a.amount,onChange:C=>i(T=>({...T,amount:C.target.value})),required:!0,style:{width:"100%"}}),a.amount&&b[a.crypto]&&e.jsxs("small",{style:{color:"#666"},children:["≈ ₹",j(parseFloat(a.amount),a.crypto).toFixed(2)]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Recipient Email"}),e.jsx("input",{type:"email",placeholder:"Enter recipient's email",value:a.recipientEmail,onChange:C=>i(T=>({...T,recipientEmail:C.target.value})),required:!0,style:{width:"100%"}})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Description (Optional)"}),e.jsx("input",{type:"text",placeholder:"Enter description",value:a.description,onChange:C=>i(T=>({...T,description:C.target.value})),style:{width:"100%"}})]}),e.jsx("button",{onClick:A,disabled:c,style:{width:"100%",padding:"0.75rem",background:"#28a745",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:c?"not-allowed":"pointer",opacity:c?.6:1},children:c?"Processing...":"Send Crypto"})]})})]}),e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem"},children:"📊 Recent Transfers"}),e.jsx("div",{className:"card",children:N(o)})]})]})]})}):e.jsx("div",{style:{padding:"4rem 0",textAlign:"center"},children:e.jsx("p",{children:"Loading profile..."})})},ls=()=>{const[r,t]=l.useState([]),[n,s]=l.useState([]),[a,i]=l.useState(1),o=10,[d,c]=l.useState(!0),[u,m]=l.useState(""),[h,g]=l.useState(""),[y,k]=l.useState("all"),[x,b]=l.useState(""),[j,B]=l.useState(""),{currentUser:v,userProfile:P}=H(),F=Q(),A=l.useCallback(async()=>{if(!v){F("/");return}c(!0);try{const p=await q.getUserTransactions(v.uid,void 0,100);t(p),s(p)}catch(p){console.error("Error loading transactions:",p),f.error("Error loading transactions"),t([]),s([])}finally{c(!1)}},[v,F]);l.useEffect(()=>{A()},[A]),l.useEffect(()=>{N()},[r,u,h,y,x,j]);const N=()=>{let p=[...r];if(u&&(p=p.filter(W=>W.type===u)),h&&(p=p.filter(W=>W.currency===h)),x&&(p=p.filter(W=>W.status===x)),y!=="all"){const W=new Date;let R=new Date;switch(y){case"7days":R.setDate(W.getDate()-7);break;case"30days":R.setDate(W.getDate()-30);break;case"90days":R.setDate(W.getDate()-90);break}p=p.filter(O=>O.timestamp>=R)}if(j){const W=j.toLowerCase();p=p.filter(R=>R.description.toLowerCase().includes(W)||R.currency.toLowerCase().includes(W)||R.type.toLowerCase().includes(W))}s(p),i(1)},C=()=>{m(""),g(""),k("all"),b(""),B("")},T=()=>({totalTransactions:r.length,totalDeposits:r.filter(W=>W.type==="deposit").length,totalWithdrawals:r.filter(W=>W.type==="withdrawal").length,totalTransfers:r.filter(W=>W.type==="transfer").length,totalVolume:r.reduce((W,R)=>W+Math.abs(R.amount),0)}),z=()=>{const p=[["Date","Type","Amount","Currency","Description","Status"],...n.map(X=>[new Date(X.timestamp).toISOString().split("T")[0],X.type,X.amount.toString(),X.currency,X.description,X.status])].map(X=>X.join(",")).join(`
`),W=new Blob([p],{type:"text/csv"}),R=window.URL.createObjectURL(W),O=document.createElement("a");O.href=R,O.download=`transactions_${new Date().toISOString().split("T")[0]}.csv`,O.click(),window.URL.revokeObjectURL(R)},$=a*o,I=$-o,E=n.slice(I,$),D=Math.ceil(n.length/o),U=()=>{if(D<=1)return null;const p=[];for(let W=1;W<=D;W++)p.push(e.jsx("button",{onClick:()=>i(W),style:{padding:"0.5rem 0.75rem",margin:"0 0.25rem",background:a===W?"#007bff":"#f8f9fa",color:a===W?"white":"#333",border:"1px solid #dee2e6",borderRadius:"4px",cursor:"pointer"},children:W},W));return e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"2rem"},children:[e.jsx("button",{onClick:()=>i(Math.max(1,a-1)),disabled:a===1,style:{padding:"0.5rem 0.75rem",margin:"0 0.25rem",background:"#f8f9fa",color:"#333",border:"1px solid #dee2e6",borderRadius:"4px",cursor:a===1?"not-allowed":"pointer",opacity:a===1?.5:1},children:"Previous"}),p,e.jsx("button",{onClick:()=>i(Math.min(D,a+1)),disabled:a===D,style:{padding:"0.5rem 0.75rem",margin:"0 0.25rem",background:"#f8f9fa",color:"#333",border:"1px solid #dee2e6",borderRadius:"4px",cursor:a===D?"not-allowed":"pointer",opacity:a===D?.5:1},children:"Next"})]})},S=p=>e.jsxs("div",{style:{padding:"1rem",border:"1px solid #eee",borderRadius:"8px",marginBottom:"0.5rem",display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 2fr 1fr",gap:"1rem",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontWeight:"600",margin:0,fontSize:"0.9rem"},children:new Date(p.timestamp).toLocaleDateString()}),e.jsx("p",{style:{fontSize:"0.8rem",color:"#666",margin:0},children:new Date(p.timestamp).toLocaleTimeString()})]}),e.jsx("div",{children:e.jsx("span",{style:{padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.8rem",fontWeight:"500",background:p.type==="deposit"?"#d1ecf1":p.type==="withdrawal"?"#f8d7da":"#fff3cd",color:p.type==="deposit"?"#0c5460":p.type==="withdrawal"?"#721c24":"#856404"},children:p.type})}),e.jsx("div",{children:e.jsxs("p",{style:{fontWeight:"600",margin:0,color:p.amount<0?"#dc3545":p.amount>0?"#28a745":"#333"},children:[p.amount>0?"+":"",p.amount]})}),e.jsx("div",{children:e.jsx("p",{style:{fontWeight:"500",margin:0},children:p.currency})}),e.jsx("div",{children:e.jsx("p",{style:{margin:0,fontSize:"0.9rem"},children:p.description})}),e.jsx("div",{children:e.jsx("span",{style:{padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.8rem",fontWeight:"500",background:p.status==="completed"?"#d4edda":p.status==="pending"?"#fff3cd":"#f8d7da",color:p.status==="completed"?"#155724":p.status==="pending"?"#856404":"#721c24"},children:p.status})})]},p.id);if(!P)return e.jsx("div",{style:{padding:"4rem 0",textAlign:"center"},children:e.jsx("p",{children:"Loading profile..."})});const w=T();return e.jsx("div",{style:{padding:"2rem 0"},children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Transaction History"}),e.jsx("p",{style:{color:"#666",fontSize:"1.1rem"},children:"View and manage all your transactions"})]}),e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h3",{style:{marginBottom:"1rem"},children:"Transaction Statistics"}),e.jsxs("div",{className:"grid grid-cols-4",style:{gap:"1rem"},children:[e.jsxs("div",{className:"card text-center",children:[e.jsx("span",{style:{color:"#666",fontSize:"0.9rem"},children:"Total Transactions"}),e.jsx("span",{style:{display:"block",fontSize:"2rem",fontWeight:"bold",margin:"0.5rem 0",color:"#007bff"},children:w.totalTransactions})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("span",{style:{color:"#666",fontSize:"0.9rem"},children:"Deposits"}),e.jsx("span",{style:{display:"block",fontSize:"2rem",fontWeight:"bold",margin:"0.5rem 0",color:"#28a745"},children:w.totalDeposits})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("span",{style:{color:"#666",fontSize:"0.9rem"},children:"Withdrawals"}),e.jsx("span",{style:{display:"block",fontSize:"2rem",fontWeight:"bold",margin:"0.5rem 0",color:"#dc3545"},children:w.totalWithdrawals})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("span",{style:{color:"#666",fontSize:"0.9rem"},children:"Transfers"}),e.jsx("span",{style:{display:"block",fontSize:"2rem",fontWeight:"bold",margin:"0.5rem 0",color:"#ffc107"},children:w.totalTransfers})]})]})]}),e.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[e.jsx("h3",{style:{marginBottom:"1rem"},children:"Filters"}),e.jsxs("div",{className:"grid grid-cols-3",style:{gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Transaction Type"}),e.jsxs("select",{value:u,onChange:p=>m(p.target.value),style:{width:"100%"},children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"deposit",children:"Deposits"}),e.jsx("option",{value:"withdrawal",children:"Withdrawals"}),e.jsx("option",{value:"transfer",children:"Transfers"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Currency"}),e.jsxs("select",{value:h,onChange:p=>g(p.target.value),style:{width:"100%"},children:[e.jsx("option",{value:"",children:"All Currencies"}),e.jsx("option",{value:"INR",children:"INR"}),e.jsx("option",{value:"BTC",children:"BTC"}),e.jsx("option",{value:"USDT",children:"USDT"}),e.jsx("option",{value:"BXC",children:"BXC"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Status"}),e.jsxs("select",{value:x,onChange:p=>b(p.target.value),style:{width:"100%"},children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"failed",children:"Failed"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3",style:{gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Date Range"}),e.jsxs("select",{value:y,onChange:p=>k(p.target.value),style:{width:"100%"},children:[e.jsx("option",{value:"all",children:"All Time"}),e.jsx("option",{value:"7days",children:"Last 7 Days"}),e.jsx("option",{value:"30days",children:"Last 30 Days"}),e.jsx("option",{value:"90days",children:"Last 90 Days"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Search"}),e.jsx("input",{type:"text",placeholder:"Search transactions...",value:j,onChange:p=>B(p.target.value),style:{width:"100%"}})]}),e.jsxs("div",{style:{display:"flex",alignItems:"end",gap:"0.5rem"},children:[e.jsx("button",{onClick:C,style:{padding:"0.75rem 1rem",background:"#6c757d",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:"Clear Filters"}),e.jsx("button",{onClick:z,style:{padding:"0.75rem 1rem",background:"#28a745",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:"Export CSV"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsxs("h3",{children:["Transactions (",n.length,")"]}),e.jsxs("p",{style:{color:"#666",margin:0},children:["Showing ",I+1,"-",Math.min($,n.length)," of ",n.length]})]}),d?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:e.jsx("p",{children:"Loading transactions..."})}):n.length===0?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:e.jsx("p",{style:{color:"#666"},children:"No transactions found matching your criteria."})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 2fr 1fr",gap:"1rem",padding:"1rem",background:"#f8f9fa",borderRadius:"8px",marginBottom:"0.5rem",fontWeight:"600",fontSize:"0.9rem"},children:[e.jsx("div",{children:"Date"}),e.jsx("div",{children:"Type"}),e.jsx("div",{children:"Amount"}),e.jsx("div",{children:"Currency"}),e.jsx("div",{children:"Description"}),e.jsx("div",{children:"Status"})]}),E.map(S),U()]})]})]})})},cs=()=>{const[r,t]=l.useState(!1),[n,s]=l.useState({displayName:"",email:"",phone:"",address:""}),[a,i]=l.useState(!1),[o,d]=l.useState({totalDeposits:0,totalWithdrawals:0,totalTransfers:0,accountAge:0}),{currentUser:c,userProfile:u,logout:m,refreshUserProfile:h}=H(),{account:g,isConnected:y,connectWallet:k,disconnectWallet:x,getNetworkStatus:b}=pe(),{convertToINR:j}=Ee(),B=Q();l.useEffect(()=>{if(!c){B("/");return}u&&s({displayName:c.displayName||"",email:u.email||c.email||"",phone:u.phone||"",address:u.address||""}),v()},[c,u,B]);const v=async()=>{if(c)try{const N=await q.getUserTransactions(c.uid,void 0,1e3),C=N.filter(I=>I.type==="deposit").length,T=N.filter(I=>I.type==="withdrawal").length,z=N.filter(I=>I.type==="transfer").length,$=c.metadata.creationTime?Math.floor((Date.now()-new Date(c.metadata.creationTime).getTime())/(1e3*60*60*24)):0;d({totalDeposits:C,totalWithdrawals:T,totalTransfers:z,accountAge:$})}catch(N){console.error("Error loading user stats:",N)}},P=async()=>{if(!c||!u){f.error("User not found");return}try{i(!0),n.displayName!==c.displayName&&await Yt(c,{displayName:n.displayName});const N=je(ee,"users",c.uid);await Ce(N,{phone:n.phone,address:n.address}),await h(),f.success("Profile updated successfully!"),t(!1)}catch(N){console.error("Error updating profile:",N),f.error("Failed to update profile: "+N.message)}finally{i(!1)}},F=async()=>{try{await m(),B("/")}catch(N){console.error("Logout failed:",N),f.error("Logout failed")}},A=()=>{if(!u)return 0;const N=u.inrBalance,C=j(u.cryptoBalances.BTC,"BTC"),T=j(u.cryptoBalances.USDT,"USDT"),z=j(u.cryptoBalances.BXC,"BXC");return N+C+T+z};return u?e.jsx("div",{style:{padding:"2rem 0"},children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Profile"}),e.jsx("p",{style:{color:"#666",fontSize:"1.1rem"},children:"Manage your account settings and view statistics"})]}),e.jsxs("div",{className:"grid grid-cols-3",style:{gap:"2rem"},children:[e.jsxs("div",{style:{gridColumn:"span 2"},children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:"Personal Information"}),r?e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{onClick:P,disabled:a,style:{padding:"0.5rem 1rem",background:"#28a745",color:"white",border:"none",borderRadius:"8px",cursor:a?"not-allowed":"pointer",opacity:a?.6:1},children:a?"Saving...":"💾 Save"}),e.jsx("button",{onClick:()=>t(!1),style:{padding:"0.5rem 1rem",background:"#6c757d",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:"❌ Cancel"})]}):e.jsx("button",{onClick:()=>t(!0),style:{padding:"0.5rem 1rem",background:"#007bff",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:"✏️ Edit Profile"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Display Name"}),r?e.jsx("input",{type:"text",value:n.displayName,onChange:N=>s(C=>({...C,displayName:N.target.value})),placeholder:"Enter your display name",style:{width:"100%"}}):e.jsx("p",{style:{margin:0,padding:"0.75rem",background:"black",borderRadius:"8px"},children:n.displayName||"Not set"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Email Address"}),e.jsxs("p",{style:{margin:0,padding:"0.75rem",background:"black",borderRadius:"8px",color:"#666"},children:[n.email,e.jsx("span",{style:{fontSize:"0.8rem",marginLeft:"0.5rem"},children:"(Cannot be changed)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Phone Number"}),r?e.jsx("input",{type:"tel",value:n.phone,onChange:N=>s(C=>({...C,phone:N.target.value})),placeholder:"Enter your phone number",style:{width:"100%"}}):e.jsx("p",{style:{margin:0,padding:"0.75rem",background:"black",borderRadius:"8px"},children:n.phone||"Not set"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Address"}),r?e.jsx("textarea",{value:n.address,onChange:N=>s(C=>({...C,address:N.target.value})),placeholder:"Enter your address",rows:3,style:{width:"100%",resize:"vertical"}}):e.jsx("p",{style:{margin:0,padding:"0.75rem",background:"black",borderRadius:"8px"},children:n.address||"Not set"})]})]})]}),e.jsxs("div",{className:"card",style:{marginTop:"2rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem"},children:"Wallet Connection"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,fontWeight:"600"},children:"MetaMask Wallet"}),e.jsx("p",{style:{margin:0,fontSize:"0.9rem",color:"#666"},children:y&&g?`Connected: ${g.slice(0,6)}...${g.slice(-4)}`:"Not connected"}),e.jsxs("p",{style:{margin:0,fontSize:"0.8rem",color:"#666"},children:["Network: ",b()]})]}),y?e.jsx("button",{onClick:x,style:{padding:"0.5rem 1rem",background:"#dc3545",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:"Disconnect"}):e.jsx("button",{onClick:k,style:{padding:"0.5rem 1rem",background:"#007bff",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:"Connect Wallet"})]})})]}),e.jsxs("div",{className:"card",style:{marginTop:"2rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem"},children:"Account Actions"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsx("button",{onClick:()=>B("/history"),style:{padding:"1rem",background:"black",color:"#333",border:"1px solid #dee2e6",borderRadius:"8px",cursor:"pointer",textAlign:"left",display:"flex",alignItems:"center",gap:"0.5rem"},children:"📊 View Transaction History"}),e.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to logout?")&&F()},style:{padding:"1rem",background:"#dc3545",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",textAlign:"left",display:"flex",alignItems:"center",gap:"0.5rem"},children:"🚪 Logout"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[e.jsx("h3",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"1rem"},children:"Portfolio Overview"}),e.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[e.jsx("p",{style:{fontSize:"0.9rem",color:"#666",margin:0},children:"Total Portfolio Value"}),e.jsxs("p",{style:{fontSize:"2rem",fontWeight:"bold",margin:"0.5rem 0",color:"#007bff"},children:["₹",A().toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"#666"},children:"INR"}),e.jsxs("span",{style:{fontWeight:"600"},children:["₹",u.inrBalance.toFixed(2)]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"#666"},children:"BTC"}),e.jsx("span",{style:{fontWeight:"600"},children:u.cryptoBalances.BTC.toFixed(8)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"#666"},children:"USDT"}),e.jsx("span",{style:{fontWeight:"600"},children:u.cryptoBalances.USDT.toFixed(2)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"#666"},children:"BXC"}),e.jsx("span",{style:{fontWeight:"600"},children:u.cryptoBalances.BXC.toFixed(2)})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"1rem"},children:"Account Statistics"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"#666"},children:"Account Age"}),e.jsxs("span",{style:{fontWeight:"600"},children:[o.accountAge," days"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"#666"},children:"Total Deposits"}),e.jsx("span",{style:{fontWeight:"600"},children:o.totalDeposits})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"#666"},children:"Total Withdrawals"}),e.jsx("span",{style:{fontWeight:"600"},children:o.totalWithdrawals})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"#666"},children:"Total Transfers"}),e.jsx("span",{style:{fontWeight:"600"},children:o.totalTransfers})]})]})]}),e.jsxs("div",{className:"card",style:{marginTop:"2rem"},children:[e.jsx("h3",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"1rem"},children:"Account Info"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",fontSize:"0.9rem"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"#666"},children:"User ID:"}),e.jsx("br",{}),e.jsx("span",{style:{fontFamily:"monospace",fontSize:"0.8rem"},children:c==null?void 0:c.uid})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#666"},children:"Member Since:"}),e.jsx("br",{}),e.jsx("span",{children:c!=null&&c.metadata.creationTime?new Date(c.metadata.creationTime).toLocaleDateString():"Unknown"})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#666"},children:"Last Sign In:"}),e.jsx("br",{}),e.jsx("span",{children:c!=null&&c.metadata.lastSignInTime?new Date(c.metadata.lastSignInTime).toLocaleDateString():"Unknown"})]})]})]})]})]})]})}):e.jsx("div",{style:{padding:"4rem 0",textAlign:"center"},children:e.jsx("p",{children:"Loading profile..."})})},Pe={uid:"zgtQXvwBhMbHR4FcdduoNF7sbhl1",email:"vaibhav.admin@gmail.com",password:"Vaibhav1234"},ds=()=>{const[r,t]=l.useState([]),[n,s]=l.useState(!0),[a,i]=l.useState(!1),[o,d]=l.useState({email:"",password:""}),[c,u]=l.useState(!1),[m,h]=l.useState(null),[g,y]=l.useState(!1),[k,x]=l.useState(!1),{currentUser:b,login:j,logout:B}=H(),{account:v,isConnected:P,connectWallet:F,web3:A,getNetworkStatus:N}=pe();l.useEffect(()=>{b&&b.uid===Pe.uid?(i(!0),I(),z(),$()):i(!1)},[b]),l.useEffect(()=>{if(a){const S=setInterval(()=>{I()},3e4);return()=>clearInterval(S)}},[a]);const C=async S=>{S.preventDefault(),u(!0);try{await j(o.email,o.password),f.success("Login successful! Checking admin access...")}catch(w){console.error("Admin login error:",w),f.error("Login failed: "+(w.message||"Invalid credentials"))}finally{u(!1)}},T=async()=>{try{await B(),i(!1),d({email:"",password:""}),f.success("Admin logged out successfully")}catch(S){console.error("Logout error:",S),f.error("Error logging out")}},z=async()=>{try{A&&P&&h("0x76b16F59Cfab5DdaE5D149BE98E5d755F939572A")}catch(S){console.error("Failed to load contract owner:",S)}},$=async()=>{try{if(!k)return;y(!1)}catch{x(!1)}},I=async()=>{try{s(!0);const S=we(ee,"pending_withdrawals"),w=Ye(S,Je("status","==","pending_admin_execution"),Jt(50)),p=await Ke(w),W=[];p.forEach(R=>{W.push({id:R.id,...R.data()})}),W.sort((R,O)=>{var be,Re;const X=(be=R.createdAt)!=null&&be.toDate?R.createdAt.toDate():new Date(R.createdAt);return((Re=O.createdAt)!=null&&Re.toDate?O.createdAt.toDate():new Date(O.createdAt)).getTime()-X.getTime()}),t(W)}catch(S){console.error("Error loading pending withdrawals:",S),f.error("Error loading pending withdrawals")}finally{s(!1)}},E=S=>{var w,p;try{if(!S)return"Unknown error";if(typeof S=="string")return S;if(S.message)return S.message;if(S.reason)return S.reason;if(S.data){if(typeof S.data=="string")return S.data;if(S.data.message)return S.data.message;if(S.data.reason)return S.data.reason;if((w=S.data.originalError)!=null&&w.message)return S.data.originalError.message}if((p=S.originalError)!=null&&p.message)return S.originalError.message}catch{}return"execution reverted"},D=async S=>{try{if(!A||!v){f.error("Please connect admin wallet first");return}if(m&&v.toLowerCase()!==m.toLowerCase()){f.error("Connect the contract owner wallet to execute withdrawals");return}f.loading("Executing withdrawal...",{id:"execute-withdrawal"}),await new Promise(w=>setTimeout(w,2e3)),await Ce(je(ee,"pending_withdrawals",S.id),{status:"executed",executedAt:new Date,txHash:"0x"+Math.random().toString(16).substr(2,64),executedBy:v}),await ct(we(ee,"transactions"),{userId:S.userId,type:"withdrawal",currency:S.crypto,amount:S.cryptoAmount,inrAmount:S.inrAmount,status:"completed",timestamp:new Date,txHash:"0x"+Math.random().toString(16).substr(2,64),toAddress:S.userAddress,description:`INR to ${S.crypto} withdrawal`}),f.dismiss("execute-withdrawal"),f.success("Withdrawal executed successfully!"),await I()}catch(w){const p=E(w);console.error("Withdrawal execution error:",{error:w,message:p}),f.dismiss("execute-withdrawal"),f.error(`Failed to execute withdrawal: ${p}`)}},U=async S=>{if(window.confirm("Are you sure you want to reject this withdrawal? This will refund the user."))try{f.loading("Rejecting withdrawal...",{id:"reject-withdrawal"}),await Ce(je(ee,"pending_withdrawals",S.id),{status:"rejected",rejectedAt:new Date,rejectedBy:v||"admin"});const w=await Ke(Ye(we(ee,"users"),Je("uid","==",S.userId)));if(!w.empty){const W=(w.docs[0].data().inrBalance||0)+S.inrAmount;await Ce(je(ee,"users",w.docs[0].id),{inrBalance:W,updatedAt:new Date})}f.dismiss("reject-withdrawal"),f.success("Withdrawal rejected and INR refunded"),await I()}catch(w){console.error("Withdrawal rejection error:",w),f.dismiss("reject-withdrawal"),f.error("Failed to reject withdrawal: "+w.message)}};return a?e.jsxs("div",{style:{maxWidth:"1200px",margin:"2rem auto",padding:"0 1rem"},children:[e.jsxs("div",{style:{background:"linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%)",color:"white",padding:"2rem",borderRadius:"12px",marginBottom:"2rem",textAlign:"center"},children:[e.jsxs("h1",{style:{margin:"0 0 0.5rem 0",fontSize:"2rem",fontWeight:"bold"},children:[e.jsx("i",{className:"fas fa-cog"})," Admin Dashboard"]}),e.jsxs("p",{style:{margin:"0 0 1rem 0",fontSize:"1.1rem"},children:["Process pending INR → Crypto withdrawals",m&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),"Contract Owner: ",e.jsx("code",{children:m})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"500",background:k?g?"#fecaca":"#bbf7d0":"#e5e7eb",color:k?g?"#7f1d1d":"#14532d":"#374151",marginLeft:"10px"},children:k?g?"PAUSED":"ACTIVE":"UNKNOWN"})}),e.jsx("button",{onClick:T,style:{padding:"0.5rem 1rem",background:"#dc3545",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem"},children:"🚪 Logout"})]})]}),e.jsxs("div",{style:{background:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:"8px",padding:"1rem",marginBottom:"2rem",textAlign:"center"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{display:"inline-block",marginRight:"1rem",fontWeight:"600",color:P?"#10b981":"#ef4444"},children:P?`Connected: ${v==null?void 0:v.slice(0,6)}...${v==null?void 0:v.slice(-4)}`:"Not Connected"}),e.jsx("span",{style:{color:"#6b7280",marginRight:"1rem"},children:N()}),!P&&e.jsx("button",{onClick:F,style:{background:"#007bff",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"6px",cursor:"pointer"},children:"Connect Admin Wallet"})]}),m&&v&&v.toLowerCase()!==m.toLowerCase()&&e.jsx("div",{style:{marginTop:"0.5rem",color:"#dc3545",fontSize:"0.9rem"},children:"⚠️ Connected wallet is NOT the contract owner. Execution will fail."})]}),e.jsxs("div",{style:{background:"white",borderRadius:"12px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",padding:"2rem"},children:[e.jsxs("h2",{style:{margin:"0 0 2rem 0",fontSize:"1.5rem",fontWeight:"bold"},children:[e.jsx("i",{className:"fas fa-list"})," Pending Withdrawals"]}),n?e.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#6b7280"},children:[e.jsx("i",{className:"fas fa-spinner fa-spin",style:{fontSize:"2rem",marginBottom:"1rem"}}),e.jsx("p",{children:"Loading pending withdrawals..."})]}):r.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#6b7280"},children:[e.jsx("i",{className:"fas fa-check-circle",style:{fontSize:"3rem",color:"#10b981",marginBottom:"1rem"}}),e.jsx("h3",{children:"No pending withdrawals"}),e.jsx("p",{children:"All withdrawal requests have been processed."})]}):e.jsx("div",{children:r.map(S=>{var O,X;const p=(((X=(O=S.createdAt)==null?void 0:O.toDate)==null?void 0:X.call(O))||new Date).toLocaleString(),W=m&&v&&m.toLowerCase()===v.toLowerCase(),R=k&&g||!W;return e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"1.5rem",marginBottom:"1rem",background:"#f9fafb"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsxs("h3",{style:{margin:0,fontSize:"1.2rem"},children:["INR → ",S.crypto," Withdrawal"]}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"500",background:S.status==="pending_admin_execution"?"#fef3c7":"#fee2e2",color:S.status==="pending_admin_execution"?"#92400e":"#991b1b"},children:S.status.replace(/_/g," ").toUpperCase()})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"User ID"}),e.jsx("span",{style:{fontWeight:"600",color:"#1f2937"},children:S.userId})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"User Address"}),e.jsx("span",{style:{fontWeight:"600",color:"#1f2937"},children:S.userAddress})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"INR Amount"}),e.jsxs("span",{style:{fontWeight:"600",color:"#1f2937"},children:["₹",S.inrAmount.toLocaleString()]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Crypto Amount"}),e.jsxs("span",{style:{fontWeight:"600",color:"#1f2937"},children:[S.cryptoAmount.toFixed(8)," ",S.crypto]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Token Address"}),e.jsx("span",{style:{fontWeight:"600",color:"#1f2937"},children:S.tokenAddress})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Created At"}),e.jsx("span",{style:{fontWeight:"600",color:"#1f2937"},children:p})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[e.jsxs("button",{onClick:()=>D(S),disabled:R,style:{background:"#10b981",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"6px",cursor:R?"not-allowed":"pointer",transition:"background 0.2s",opacity:R?.6:1},title:W?"Contract is paused":"Connect the contract owner wallet",children:[e.jsx("i",{className:"fas fa-check"})," Execute Withdrawal"]}),e.jsxs("button",{onClick:()=>U(S),style:{background:"#ef4444",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"6px",cursor:"pointer",transition:"background 0.2s"},children:[e.jsx("i",{className:"fas fa-times"})," Reject"]})]})]},S.id)})})]})]}):e.jsx("div",{style:{padding:"2rem 0"},children:e.jsx("div",{className:"container",children:e.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"🔐 Admin Login"}),e.jsx("p",{style:{color:"#666",fontSize:"1rem"},children:"Access the withdrawal management panel"})]}),e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Email Address"}),e.jsx("input",{type:"email",value:o.email,onChange:S=>d(w=>({...w,email:S.target.value})),placeholder:"Enter admin email",required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"8px",fontSize:"1rem"}})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Password"}),e.jsx("input",{type:"password",value:o.password,onChange:S=>d(w=>({...w,password:S.target.value})),placeholder:"Enter admin password",required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"8px",fontSize:"1rem"}})]}),e.jsx("button",{type:"submit",disabled:c,style:{width:"100%",padding:"0.75rem",background:"#007bff",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:c?"not-allowed":"pointer",opacity:c?.6:1},children:c?"Logging in...":"Login as Admin"})]}),e.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"#f8f9fa",borderRadius:"8px"},children:[e.jsx("h4",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",color:"#666"},children:"Admin Credentials:"}),e.jsxs("p",{style:{margin:"0",fontSize:"0.8rem",color:"#666"},children:["Email: ",Pe.email,e.jsx("br",{}),"Password: ",Pe.password]})]})]})})})})};function us(){return e.jsx(Gn,{children:e.jsx(Qn,{children:e.jsx(Zn,{children:e.jsxs("div",{className:"App",children:[e.jsx(es,{}),e.jsx("main",{children:e.jsxs(Vr,{children:[e.jsx(V,{path:"/",element:e.jsx(ts,{})}),e.jsx(V,{path:"/dashboard",element:e.jsx(ce,{children:e.jsx(rs,{})})}),e.jsx(V,{path:"/deposit",element:e.jsx(ce,{children:e.jsx(as,{})})}),e.jsx(V,{path:"/withdraw",element:e.jsx(ce,{children:e.jsx(is,{})})}),e.jsx(V,{path:"/send",element:e.jsx(ce,{children:e.jsx(os,{})})}),e.jsx(V,{path:"/history",element:e.jsx(ce,{children:e.jsx(ls,{})})}),e.jsx(V,{path:"/profile",element:e.jsx(ce,{children:e.jsx(cs,{})})}),e.jsx(V,{path:"/admin-withdrawals",element:e.jsx(ds,{})}),e.jsx(V,{path:"*",element:e.jsx(jt,{to:"/",replace:!0})})]})})]})})})})}ze.createRoot(document.getElementById("root")).render(e.jsx($t.StrictMode,{children:e.jsxs(en,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[e.jsx(us,{}),e.jsx(qn,{position:"top-right"})]})}));
